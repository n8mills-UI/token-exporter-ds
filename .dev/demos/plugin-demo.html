<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plugin Template Demo</title>
    <link rel="stylesheet" href="docs/design-system.css">
    <style>
        body {
            width: 340px;
            padding: 0;
            margin: 0;
            font-family: var(--font-family-body);
            background: var(--surface-bg);
        }
        .plugin-container {
            padding: var(--size-3);
        }
        .demo-section {
            margin-bottom: var(--size-4);
            padding: var(--size-3);
            background: var(--gray-1);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-subtle);
        }
        .demo-section h3 {
            margin: 0 0 var(--size-2) 0;
            color: var(--color-text-muted);
        }
        .status-good {
            color: var(--green-9);
            background: var(--green-1);
            padding: var(--size-1) var(--size-2);
            border-radius: var(--radius-xs);
            font-size: var(--text-sm);
            font-weight: 600;
        }
        .code-snippet {
            background: var(--gray-2);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-xs);
            padding: var(--size-2);
            font-family: var(--font-family-mono);
            font-size: var(--text-sm);
            color: var(--color-text-muted);
            margin: var(--size-2) 0;
        }
    </style>
</head>
<body>
    <!-- Include the template bundle -->
    <script src="temp/templates-bundle.js"></script>
    
    <!-- Mock icon system -->
    <script>
        window.renderIcons = function() {
            const icons = {
                'sliders-horizontal': '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="21" y1="4" x2="9" y2="4"/><line x1="21" y1="12" x2="9" y2="12"/><line x1="21" y1="20" x2="9" y2="20"/><line x1="5" y1="4" x2="5" y2="4"/><line x1="5" y1="12" x2="5" y2="12"/><line x1="5" y1="20" x2="5" y2="20"/></svg>',
                'palette': '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="13.5" cy="6.5" r=".5"/><circle cx="17.5" cy="10.5" r=".5"/><circle cx="8.5" cy="7.5" r=".5"/><circle cx="6.5" cy="12.5" r=".5"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/></svg>',
                'type': '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="4,7 4,4 20,4 20,7"/><line x1="9" y1="20" x2="15" y2="20"/><line x1="12" y1="4" x2="12" y2="20"/></svg>',
                'hash': '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></svg>',
                'toggle-right': '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="5" width="22" height="14" rx="7" ry="7"/><circle cx="16" cy="12" r="3"/></svg>',
                'refresh-cw': '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23,4 23,10 17,10"/><polyline points="1,20 1,14 7,14"/><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/></svg>'
            };
            
            document.querySelectorAll('[data-icon]').forEach(el => {
                const iconName = el.getAttribute('data-icon');
                if (icons[iconName]) {
                    el.innerHTML = icons[iconName];
                }
            });
        };
    </script>

    <div class="plugin-container">
        <div class="demo-section">
            <h3>Plugin Demo: Template Functions</h3>
            <span class="status-good">âœ“ Templates Loaded</span>
            
            <div class="code-snippet">
                // Plugin would use templates like this:<br>
                const html = templates.filtersCard(figmaData);<br>
                element.innerHTML = html;
            </div>
        </div>

        <!-- This is where the plugin would inject the template-generated HTML -->
        <div id="plugin-filters-container">
            <!-- Will be populated by template function -->
        </div>
        
        <div class="demo-section">
            <h3>Dynamic Update Demo</h3>
            <button class="btn btn-sm btn-secondary" onclick="simulateDataUpdate()">
                <i data-icon="refresh-cw"></i>
                Simulate Figma Data Update
            </button>
        </div>
    </div>

    <script>
        // Simulate how the plugin would work
        let currentDataIndex = 0;
        
        // Sample data sets that simulate different Figma states
        const figmaDataSets = [
            // Initial state
            {
                collections: [
                    {
                        name: 'Brand Colors',
                        selected: true,
                        badges: [
                            { color: 'cyan', icon: 'palette', count: 12 }
                        ],
                        total: 12
                    },
                    {
                        name: 'Typography',
                        selected: true,
                        badges: [
                            { color: 'purple', icon: 'type', count: 24 }
                        ],
                        total: 24
                    }
                ]
            },
            // After user adds more collections
            {
                collections: [
                    {
                        name: 'Brand Colors',
                        selected: true,
                        badges: [
                            { color: 'cyan', icon: 'palette', count: 12 }
                        ],
                        total: 12
                    },
                    {
                        name: 'Typography',
                        selected: false,
                        badges: [
                            { color: 'purple', icon: 'type', count: 24 },
                            { color: 'orange', icon: 'hash', count: 8 }
                        ],
                        total: 32
                    },
                    {
                        name: 'Spacing System',
                        selected: true,
                        badges: [
                            { color: 'orange', icon: 'hash', count: 16 }
                        ],
                        total: 16
                    }
                ]
            },
            // After user creates new collection
            {
                collections: [
                    {
                        name: 'Design Tokens',
                        selected: true,
                        badges: [
                            { color: 'cyan', icon: 'palette', count: 8 },
                            { color: 'purple', icon: 'type', count: 12 },
                            { color: 'orange', icon: 'hash', count: 20 },
                            { color: 'pink', icon: 'toggle-right', count: 4 }
                        ],
                        total: 44
                    }
                ]
            }
        ];
        
        function updatePluginUI() {
            // This simulates how the actual plugin would update the UI
            const data = figmaDataSets[currentDataIndex];
            
            // Use the template function to generate HTML
            const html = window.templates.filtersCard(data);
            
            // Inject into the DOM (exactly like the plugin would)
            document.getElementById('plugin-filters-container').innerHTML = html;
            
            // Render icons (like the plugin does)
            renderIcons();
        }
        
        function simulateDataUpdate() {
            currentDataIndex = (currentDataIndex + 1) % figmaDataSets.length;
            updatePluginUI();
        }
        
        // Initialize with first data set
        window.addEventListener('load', function() {
            updatePluginUI();
        });
    </script>
</body>
</html>
