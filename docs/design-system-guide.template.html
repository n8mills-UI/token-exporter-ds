<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Token Exporter - Design System Guide</title>
        
        <!-- === YOUR CENTRAL DESIGN SYSTEM STYLESHEET === -->
        <link rel="stylesheet" href="design-system.css">
        
        <!-- Icon System -->
        <!-- @include src/components/icons/_icon-system.html -->
    </head>



    <body id="top">
        <!-- Mobile menu toggle -->
      <!-- START: New Mobile Header -->
    <header class="mobile-header" id="mobile-header">
        <div class="header-brand">
            <div class="mobile-header-logo">
                <svg viewBox="0 0 355 355" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_mobile_logo)"><path d="M0 0H355V355H0V0Z" fill="url(#paint0_linear_mobile_logo)"/><circle cx="133.5" cy="177.5" r="99.5" fill="black" fill-opacity="0.42"/><path d="M178 88.4824C210.612 104.817 233 138.543 233 177.5C233 216.456 210.611 250.182 178 266.517C145.389 250.182 123 216.456 123 177.5C123 138.543 145.388 104.817 178 88.4824Z" fill="black"/><circle cx="222.5" cy="177.5" r="99.5" fill="black" fill-opacity="0.42"/></g>
                    <defs><linearGradient id="paint0_linear_mobile_logo" x1="177.5" y1="0" x2="177.5" y2="355" gradientUnits="userSpaceOnUse"><stop stop-color="#D2FF37"/><stop offset="1" stop-color="#EEFF00"/></linearGradient><clipPath id="clip0_mobile_logo"><rect width="355" height="355" rx="58" fill="white"/></clipPath></defs>
                </svg>
            </div>
            <span class="header-title">
                <span>Token</span>
                <span>Exporter</span>
            </span>
        </div>
        <div class="mobile-header-controls">
            <!-- Mobile Theme Toggle -->
            <button class="theme-toggle" data-theme-toggle aria-label="Toggle theme">
    <div class="sun-container icon-container">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" >
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
    </div>
    <div class="moon-container icon-container">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" >
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
    </div>
    <div class="slider"></div>
</button>
            <button class="mobile-menu-toggle-right" id="mobile-menu-toggle-right" aria-label="Toggle navigation">
                <span class="hamburger-icon">
                    <span class="line line-1"></span>
                    <span class="line line-2"></span>
                    <span class="line line-3"></span>
                </span>
            </button>
        </div>
    </header>
    <!-- END: New Mobile Header -->

    <!-- START: New Mobile Menu Panel -->
    <div class="menu-overlay" id="menu-overlay"></div>
    <nav class="mobile-menu" id="mobile-menu">
        <div class="menu-header">
             <button class="mobile-menu-toggle-right" id="menu-close-btn" aria-label="Close navigation">
                <span class="hamburger-icon">
                    <span class="line line-1"></span>
                    <span class="line line-2"></span>
                    <span class="line line-3"></span>
                </span>
            </button>
        </div>
        <!-- The navigation links will be dynamically populated by the existing sidebar script -->
        <ul class="mobile-nav-links" id="mobile-nav-links">
            <!-- Links will be inserted here by JavaScript -->
        </ul>
    </nav>
    <!-- END: New Mobile Menu Panel -->


        <div class="guide-container">
            <!-- Sidebar Navigation -->
            <nav class="guide-sidebar" id="sidebar">
        <div class="guide-header">
            <a href="#top" class="guide-logo-link" style="text-decoration: none; color: inherit;">
                <div class="guide-logo">
                    <svg viewBox="0 0 355 355" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_9098_160422_guide)">
                        <path d="M0 0H355V355H0V0Z" fill="url(#paint0_linear_9098_160422_guide)"/>
                        <circle cx="133.5" cy="177.5" r="99.5" fill="black" fill-opacity="0.42"/>
                        <path d="M178 88.4824C210.612 104.817 233 138.543 233 177.5C233 216.456 210.611 250.182 178 266.517C145.389 250.182 123 216.456 123 177.5C123 138.543 145.388 104.817 178 88.4824Z" fill="black"/>
                        <circle cx="222.5" cy="177.5" r="99.5" fill="black" fill-opacity="0.42"/>
                        </g>
                        <defs>
                        <linearGradient id="paint0_linear_9098_160422_guide" x1="177.5" y1="0" x2="177.5" y2="355" gradientUnits="userSpaceOnUse">
                        <stop stop-color="#D2FF37"/>
                        <stop offset="1" stop-color="#EEFF00"/>
                        </linearGradient>
                        <clipPath id="clip0_9098_160422_guide">
                        <rect width="355" height="355" rx="58" fill="white"/>
                        </clipPath>
                        </defs>
                    </svg>
                </div>
                <h1 class="text-heading-md guide-title">Token Exporter</h1>
            </a>
        </div>
        <div class="nav-wrapper">
            <!-- Foundation Section -->
            <div class="nav-section">
                <h3 class="nav-section-title">Foundation</h3>
                <ul class="nav-links">
                    <li><a href="#colors" class="nav-link"><i data-icon="palette"></i> Colors</a></li>
                    <li><a href="#typography" class="nav-link"><i data-icon="type"></i> Typography</a></li>
                    <li><a href="#spacing" class="nav-link"><i data-icon="move"></i> Spacing</a></li>
                    <li><a href="#effects" class="nav-link"><i data-icon="layers"></i> Effects</a></li>
                    <li><a href="#border" class="nav-link"><i data-icon="square"></i> Borders</a></li>
                    <li><a href="#border-radius" class="nav-link"><i data-icon="circle"></i> Radius</a></li>
                    <li><a href="#animations" class="nav-link"><i data-icon="play"></i> Motion</a></li>
                    <li><a href="#icons" class="nav-link"><i data-icon="sparkles"></i> Icons</a></li>
                </ul>
            </div>
            
            <!-- Components Section -->
            <div class="nav-section">
                <h3 class="nav-section-title">Components</h3>
                <ul class="nav-links">
                    <li><a href="#token-card" class="nav-link"><i data-icon="credit-card"></i> Cards</a></li>
                    <li><a href="#buttons" class="nav-link"><i data-icon="pointer"></i> Buttons</a></li>
                    <li><a href="#badges"><i data-icon="tag"></i> Badges</a></li>
                    <li><a href="#modals" class="nav-link"><i data-icon="app-window"></i> Modals</a></li>
                </ul>
            </div>
        </div>
        
        <!-- Theme Toggle -->
        <div class="theme-toggle-container">
            <div class="theme-toggle-wrapper">
                <span class="theme-toggle-label">Theme</span>
                <div id="theme-toggle">
                    <button class="theme-toggle" data-theme-toggle aria-label="Toggle theme">
    <div class="sun-container icon-container">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" >
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
    </div>
    <div class="moon-container icon-container">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" >
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
    </div>
    <div class="slider"></div>
</button>
                </div>
            </div>
        </div>
    </nav>

            
            <!-- Main Content -->
            <main class="guide-content">
    <section id="overview" class="content-section hero-section">
        <!-- HERO SECTION -->
        <div class="portfolio-hero">
            <!-- Animation background -->
            <div class="hero-animation-canvas" id="hero-animation-canvas"></div>
            <div class="hero-content-wrapper">
                <div class="m-0 z-1 relative">
                    <!-- GROUP A: Introduction Block (Top) -->
                    <div class="hero-intro-group">
                        <!-- Logo component -->
                        <div class="hero-logo">
                            <div class="token-exporter-logo xl">
                                <svg viewBox="0 0 355 355" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g clip-path="url(#clip0_hero_logo)">
                                        <path d="M0 0H355V355H0V0Z" fill="url(#paint0_linear_hero_logo)"/>
                                        <circle cx="133.5" cy="177.5" r="99.5" fill="black" fill-opacity="0.42"/>
                                        <path d="M178 88.4824C210.612 104.817 233 138.543 233 177.5C233 216.456 210.611 250.182 178 266.517C145.389 250.182 123 216.456 123 177.5C123 138.543 145.388 104.817 178 88.4824Z" fill="black"/>
                                        <circle cx="222.5" cy="177.5" r="99.5" fill="black" fill-opacity="0.42"/>
                                    </g>
                                    <defs>
                                        <linearGradient id="paint0_linear_hero_logo" x1="177.5" y1="0" x2="177.5" y2="355" gradientUnits="userSpaceOnUse">
                                            <stop stop-color="#D2FF37"/>
                                            <stop offset="1" stop-color="#EEFF00"/>
                                        </linearGradient>
                                        <clipPath id="clip0_hero_logo">
                                            <rect width="355" height="355" rx="58" fill="white"/>
                                        </clipPath>
                                    </defs>
                                </svg>
                            </div>
                        </div>
                        <h1 class="guide-main-title text-size-8 mb-3">Token Exporter</h1>
                        <p class="hero-tagline">Figma variables to production-ready code</p>
                        <p class="hero-description">Built on Open Props foundation with 500+ tokens</p>
                    </div>

                    <!-- GROUP B: Call-to-Action Block (Middle) -->
                    <div class="hero-cta-group">
                        <div class="figma-cta">
                            <a href="https://www.figma.com/community/plugin/1521741753717588633" target="_blank" class="btn btn-primary btn-md btn-inline">
                                <i data-icon="figma"></i>
                                <span>Get the Plugin</span>
                            </a>
                        </div>
                    </div>

                    <!-- GROUP C: Footer Block (Bottom) -->
                    <div class="hero-bottom">
                        <div class="social-links">
                            <a href="https://github.com/n8mills-UI" class="btn btn-icon btn-md" title="GitHub" target="_blank" rel="noopener noreferrer"><i data-icon="github"></i></a>
                            <a href="https://www.linkedin.com/in/millsdesign/" class="btn btn-icon btn-md" title="LinkedIn" target="_blank" rel="noopener noreferrer"><i data-icon="linkedin"></i></a>
                            <a href="https://natemills.me" class="btn btn-icon btn-md" title="Portfolio" target="_blank" rel="noopener noreferrer"><i data-icon="briefcase"></i></a>
                            <a href="https://www.figma.com/@mills" class="btn btn-icon btn-md" title="Figma" target="_blank" rel="noopener noreferrer"><i data-icon="figma"></i></a>
                            <a href="mailto:nate@natemills.me" class="btn btn-icon btn-md" title="Email"><i data-icon="mail"></i></a>
                        </div>
                        <p>Created with <span class="heart">❤️</span> by Nate Mills</p>
                    </div>
                </div>
                
                <!-- Scroll Cue -->
                <div class="scroll-cue-container" id="scrollCue" onclick="smoothScroll()">
                    <span class="scroll-indicator-text">Explore the system</span>
                    <div class="scroll-indicator">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- MAIN PORTFOLIO CONTENT WRAPPER -->
        <div class="portfolio-content">

            <!-- Enhanced Stats & Project Overview -->
            <div class="stats-and-overview-container" id="stats-container">
                <div class="stats-container-glass surface-glass">
    <div class="stat-item">
        <span class="icon stat-icon" data-icon="package"></span>
        <div class="stat-number text-gradient-brand"><span class="stat-value" data-target="6">0</span></div>
        <div class="stat-label">Export Formats</div>
    </div>
    <div class="stat-item">
        <span class="icon stat-icon" data-icon="atom"></span>
        <div class="stat-number text-gradient-brand"><span class="stat-value" data-target="435">0</span><span class="stat-suffix stat-suffix--plus">+</span></div>
        <div class="stat-label">Design Tokens</div>
    </div>
    <div class="stat-item">
        <span class="icon stat-icon" data-icon="zap"></span>
        <div class="stat-number text-gradient-brand"><span class="stat-value" data-target="100">0</span><span class="stat-suffix stat-suffix--percent">%</span></div>
        <div class="stat-label">Automated</div>
    </div>
    <div class="stat-item">
        <span class="icon stat-icon" data-icon="clock"></span>
        <div class="stat-number text-gradient-brand"><span class="stat-value" data-target="10">0</span><span class="stat-suffix stat-suffix--times">×</span></div>
        <div class="stat-label">Faster Export</div>
    </div>
</div>
                <div class="challenge-solution-grid">
    <div class="enhanced-card challenge-card">
        <span class="icon card-icon-large icon--hairline" data-icon="triangle-alert"></span>
        <h3 class="card-title">The Challenge</h3>
        <p class="card-content">Manual token export was slow and error-prone, creating a disconnect between design and development.</p>
    </div>
    <div class="enhanced-card solution-card">
        <span class="icon card-icon-large icon--hairline" data-icon="lightbulb"></span>
        <h3 class="card-title">The Solution</h3>
        <p class="card-content">Automated multi-format export with intelligent alias resolution and platform-native naming conventions.</p>
    </div>
    <div class="enhanced-card impact-card">
        <span class="icon card-icon-large icon--hairline" data-icon="trending-up"></span>
        <h3 class="card-title">The Impact</h3>
        <p class="card-content">10x faster token export, zero manual errors, and a seamless design-to-code workflow.</p>
    </div>
</div>
            </div>


<!-- Bridging the Gap Section -->
<div class="component-section" style="padding: var(--size-6);">
    <div class="section-header">
        <h2 class="section-title-primary"><i data-icon="link"></i> Figma to Code</h2>
        <p class="section-description" style="margin-top: 0;">A shared language for designers and developers</p>
    </div>
    <p class="section-description content-max-width section-spacing-md">
        A successful design system relies on a shared understanding between design and development. This table translates common Figma concepts into their direct code counterparts using the principles of <a href="https://atomicdesign.bradfrost.com/" target="_blank" rel="noopener noreferrer" class="link-brand">Atomic Design</a>. It provides a mental map that connects the visual design to the underlying CSS architecture.
    </p>
    <div class="table-responsive">
        <table class="table">
                <thead>
                    <tr>
                        <th><span class="icon-label"><i data-icon="atom"></i> Atomic</span></th>
                        <th><span class="icon-label"><i data-icon="figma"></i> Figma</span></th>
                        <th><span class="icon-label"><i data-icon="code-2"></i> Code</span></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td data-label="Atomic"><strong>Atoms</strong></td>
                        <td data-label="Figma"><strong>Styles</strong> (Color, Text, Effects)</td>
                        <td data-label="Code"><strong>Foundation / Tokens:</strong> The raw, unchangeable values defined as CSS variables in the <span class="badge brand">:root</span> block (e.g., <span class="badge brand">--brand-primary-lime</span>).</td>
                    </tr>
                    <tr>
                        <td data-label="Atomic"><strong>Atoms</strong></td>
                        <td data-label="Figma"><strong>Auto Layout</strong> (Spacing, Alignment)</td>
                        <td data-label="Code"><strong>Utility Classes:</strong> Single-purpose classes that apply one token directly to an element (e.g., <span class="badge brand">.flex</span>, <span class="badge brand">.p-4</span>, <span class="badge brand">.text-center</span>).</td>
                    </tr>
                    <tr>
                        <td data-label="Atomic"><strong>Molecules</strong></td>
                        <td data-label="Figma"><strong>Simple Components</strong> (Button, Input)</td>
                        <td data-label="Code"><strong>Component Classes:</strong> A class that combines multiple styles to create a simple, reusable element (e.g., <span class="badge brand">.btn</span>).</td>
                    </tr>
                    <tr>
                        <td data-label="Atomic"><strong>Organisms</strong></td>
                        <td data-label="Figma"><strong>Complex Components / Sets</strong> (Token Card)</td>
                        <td data-label="Code"><strong>Component Block:</strong> A larger, distinct section of the UI composed of multiple simpler components (e.g., <span class="badge brand">.token-summary</span>).</td>
                    </tr>
                    <tr>
                        <td data-label="Atomic"><strong>Templates</strong></td>
                        <td data-label="Figma"><strong>Pages / Frames</strong> (The Plugin UI)</td>
                        <td data-label="Code"><strong>Layout Styles:</strong> The highest-level styles that arrange components on the screen (e.g., <span class="badge brand">.guide-container</span>, <span class="badge brand">.guide-sidebar</span>).</td>
                    </tr>
                </tbody>
            </table>
        </div>
</div>


    <!-- Theme Overview Section -->
    <!-- Theme overview moved to Color System tab -->

    <!-- NEW: 2-Column Grid Wrapper -->
            <div class="content-grid-2col">
                <!-- FAQ Section -->
                <div class="faq-section">
                     <div class="section-header">
                        <h2 class="section-title-primary"><i data-icon="help-circle"></i> FAQ</h2>
                        <p class="section-description" style="margin-top: 0;">Common questions answered</p>
                    </div>
                    <div class="faq-item"><div class="faq-question"><span>Why build this when other token exporters exist?</span><i data-icon="plus" class="faq-toggle"></i></div><div class="faq-answer"><p>Most exporters are one-size-fits-all. This one speaks each platform's native language—Swift for iOS, XML for Android, and W3C-compliant CSS for web. It understands context.</p></div></div>
                    <div class="faq-item"><div class="faq-question"><span>How does AI development actually work in practice?</span><i data-icon="plus" class="faq-toggle"></i></div><div class="faq-answer"><p>It's like pair programming with a team of specialists. I outline the goal, the AI suggests code, and I refine and test. What would take hours to research takes minutes. The 10x speed boost is real.</p></div></div>
                    <div class="faq-item"><div class="faq-question"><span>What were the biggest technical challenges?</span><i data-icon="plus" class="faq-toggle"></i></div><div class="faq-answer"><p>Figma's plugin security model was tricky; you can't load external CSS, so everything must be inlined. Also, handling deeply nested color aliases required robust recursive resolution logic.</p></div></div>
                    <div class="faq-item"><div class="faq-question"><span>Is this production-ready or just a portfolio piece?</span><i data-icon="plus" class="faq-toggle"></i></div><div class="faq-answer"><p>It's production-ready. The code is defensive, handling edge cases like malformed tokens and circular references, and it's performance-optimized with batching for large datasets.</p></div></div>
                    <div class="faq-item"><div class="faq-question"><span>Why use Open Props instead of custom tokens?</span><i data-icon="plus" class="faq-toggle"></i></div><div class="faq-answer"><p>Starting from scratch is tempting but wasteful. Open Props is battle-tested, WCAG compliant out of the box, and saves months of work. I built on top of it rather than reinventing it.</p></div></div>
                    <div class="faq-item"><div class="faq-question"><span>How long did this take to build?</span><i data-icon="plus" class="faq-toggle"></i></div><div class="faq-answer"><p>Three weeks of focused development with AI assistance. Without AI, this would have been a 3-6 month project. AI turned research time into building time.</p></div></div>
                    <div class="faq-item"><div class="faq-question"><span>Can I fork this or contribute?</span><i data-icon="plus" class="faq-toggle"></i></div><div class="faq-answer"><p>Absolutely. It's open source on GitHub. The codebase is documented, modular, and designed for extension. Want to add a new export format? The pattern is clear. Found a bug? PRs are welcome.</p></div></div>
                    <div class="faq-item"><div class="faq-question"><span>What's the roadmap for future features?</span><i data-icon="plus" class="faq-toggle"></i></div><div class="faq-answer"><p>Considering token transformations (e.g., px to rem), preset style mappings, and direct GitHub integration. Community feedback will drive priorities.</p></div></div>
                </div>

                <!-- Built With Section -->
    <div class="tech-stack-grid">
        <div class="section-header">
            <h2 class="section-title-primary"><i data-icon="terminal"></i> Built With</h2>
            <p class="section-description" style="margin-top: 0;">AI-powered development stack</p>
        </div>
        <div class="tech-grid">
            <div class="tech-item" data-tech="aistudio" data-url="https://aistudio.google.com/">
                <svg height="1em" style="flex:none;line-height:1" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>Google AI Studio</title><path d="M15.028 14.16c-.035.384.089.773.353 1.057.265.284.639.434.978.568.37.145.692.263 1.038.468.33.195.622.437.866.736a3.082 3.082 0 01-.212 4.134 3.006 3.006 0 01-4.094.14 4.75 4.75 0 01-.797-.938c-.338-2.214.318-4.533 1.868-6.165z" fill="currentColor" opacity="0.5"></path><path d="M16.457 13.024c.372-.217.72-.37 1.125-.513.39-.136.787-.249 1.188-.35.4-.102.803-.188 1.207-.275.403-.086.804-.17 1.194-.318 1.91-.733 3.067-2.7 2.788-4.746-.28-2.045-1.92-3.622-3.956-3.805-.925-.082-1.818.138-2.644.524-.824.384-1.578.93-2.234 1.555-1.325 1.26-2.305 2.878-2.902 4.6a13.445 13.445 0 00-.684 5.426c.07.91.234 1.827.496 2.703.256.859.627 1.746 1.126 2.498a7.535 7.535 0 01.545-4.166c.572-1.3 1.521-2.415 2.751-3.133z" fill="currentColor"></path><path d="M7.962 14.27a3.817 3.817 0 00-.419-.413c.188.325.207.695.128 1.05a2.44 2.44 0 01-.474.961 4.096 4.096 0 01-.786.736c-.253.19-.623.431-.852.658a2.093 2.093 0 00-.334 2.534 2.048 2.048 0 002.352.946c.5-.148.925-.48 1.262-.86.34-.385.617-.842.836-1.304a6.87 6.87 0 00-1.713-4.308z" fill="currentColor" opacity="0.5"></path><path d="M3.687 5.396c1.387-.001 2.733.777 3.708 1.65 1.035.927 1.836 2.108 2.364 3.392.53 1.29.786 2.686.776 4.08-.01 1.354-.274 2.822-.86 4.06a6.874 6.874 0 00-1.713-4.31 3.405 3.405 0 00-.606-.554 3.085 3.085 0 00-.73-.369c-.506-.181-1.078-.266-1.604-.324-.543-.062-1.088-.098-1.63-.179-.556-.083-1.055-.206-1.551-.497A3.737 3.737 0 01.127 8.157a3.696 3.696 0 013.56-2.76z" fill="currentColor"></path></svg>
                AI Studio
            </div>
            <div class="tech-item" data-tech="claude" data-url="https://www.anthropic.com/claude">
                <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Claude</title><path d="m4.7144 15.9555 4.7174-2.6471.079-.2307-.079-.1275h-.2307l-.7893-.0486-2.6956-.0729-2.3375-.0971-2.2646-.1214-.5707-.1215-.5343-.7042.0546-.3522.4797-.3218.686.0608 1.5179.1032 2.2767.1578 1.6514.0972 2.4468.255h.3886l.0546-.1579-.1336-.0971-.1032-.0972L6.973 9.8356l-2.55-1.6879-1.3356-.9714-.7225-.4918-.3643-.4614-.1578-1.0078.6557-.7225.8803.0607.2246.0607.8925.686 1.9064 1.4754 2.4893 1.8336.3643.3035.1457-.1032.0182-.0728-.164-.2733-1.3539-2.4467-1.445-2.4893-.6435-1.032-.17-.6194c-.0607-.255-.1032-.4674-.1032-.7285L6.287.1335 6.6997 0l.9957.1336.419.3642.6192 1.4147 1.0018 2.2282 1.5543 3.0296.4553.8985.2429.8318.091.255h.1579v-.1457l.1275-1.706.2368-2.0947.2307-2.6957.0789-.7589.3764-.9107.7468-.4918.5828.2793.4797.686-.0668.4433-.2853 1.8517-.5586 2.9021-.3643 1.9429h.2125l.2429-.2429.9835-1.3053 1.6514-2.0643.7286-.8196.85-.9046.5464-.4311h1.0321l.759 1.1293-.34 1.1657-1.0625 1.3478-.8804 1.1414-1.2628 1.7-.7893 1.36.0729.1093.1882-.0183 2.8535-.607 1.5421-.2794 1.8396-.3157.8318.3886.091.3946-.3278.8075-1.967.4857-2.3072.4614-3.4364.8136-.0425.0304.0486.0607 1.5482.1457.6618.0364h1.621l3.0175.2247.7892.522.4736.6376-.079.4857-1.2142.6193-1.6393-.3886-3.825-.9107-1.3113-.3279h-.1822v.1093l1.0929 1.0686 2.0035 1.8092 2.5075 2.3314.1275.5768-.3218.4554-.34-.0486-2.2039-1.6575-.85-.7468-1.9246-1.621h-.1275v.17l.4432.6496 2.3436 3.5214.1214 1.0807-.17.3521-.6071.2125-.6679-.1214-1.3721-1.9246L14.38 17.959l-1.1414-1.9428-.1397.079-.674 7.2552-.3156.3703-.7286.2793-.6071-.4614-.3218-.7468.3218-1.4753.3886-1.9246.3157-1.53.2853-1.9004.17-.6314-.0121-.0425-.1397.0182-1.4328 1.9672-2.1796 2.9446-1.7243 1.8456-.4128.164-.7164-.3704.0667-.6618.4008-.5889 2.386-3.0357 1.4389-1.882.929-1.0868-.0062-.1579h-.0546l-6.3385 4.1164-1.1293.1457-.4857-.4554.0608-.7467.2307-.2429 1.9064-1.3114Z"/></svg>
                Claude Code
            </div>
            <div class="tech-item" data-tech="figma" data-url="https://www.figma.com/">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Figma
            </div>
            <div class="tech-item" data-tech="github" data-url="https://github.com/n8mills-UI/Token-Exporter-v4"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><title>GitHub</title><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.91 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>GitHub</div>
            <div class="tech-item" data-tech="lucide" data-url="https://lucide.dev/">
                <svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13 11.0004C13 10.2048 12.6837 9.44097 12.1211 8.87836C11.6289 8.38633 10.9834 8.08333 10.2969 8.01508L10 8.00043C9.20448 8.00043 8.44149 8.31592 7.87891 8.87836C7.3163 9.44097 7 10.2048 7 11.0004C7.00011 12.8567 7.73732 14.637 9.0498 15.9496C10.3626 17.2624 12.1435 18.0004 14 18.0004L14.3467 17.9916C16.077 17.9059 17.7194 17.1805 18.9502 15.9496C20.2627 14.637 20.9999 12.8567 21 11.0004C21 7.95023 19.7523 5.18166 17.7451 3.19281L17.334 2.80512L17.2607 2.73383C16.9188 2.3596 16.9098 1.78005 17.2549 1.39398C17.6229 0.982228 18.2543 0.946833 18.666 1.31488C21.3193 3.68663 23 7.15402 23 11.0004C22.9999 13.3871 22.0518 15.676 20.3643 17.3637C18.7819 18.946 16.6707 19.8784 14.4463 19.9887L14 20.0004C11.6131 20.0004 9.32357 19.0515 7.63574 17.3637C5.94819 15.676 5.00011 13.3871 5 11.0004C5 9.67435 5.52716 8.40198 6.46484 7.4643C7.4025 6.52679 8.67405 6.00043 10 6.00043L10.248 6.00629C11.4837 6.06762 12.6561 6.58541 13.5352 7.4643C14.4728 8.40198 15 9.67435 15 11.0004C14.9998 11.5525 14.5521 12.0004 14 12.0004C13.4479 12.0004 13.0002 11.5525 13 11.0004Z" fill="#1B1B1F"/>
                    <path d="M9 11C9 10.4477 9.44772 10 10 10C10.5523 10 11 10.4477 11 11C11 11.7956 11.3163 12.5585 11.8789 13.1211C12.4415 13.6837 13.2044 14 14 14L14.2969 13.9854C14.9835 13.9171 15.6289 13.6133 16.1211 13.1211C16.6837 12.5585 17 11.7956 17 11C17 9.14348 16.2629 7.36256 14.9502 6.0498C13.6374 4.73705 11.8565 4 10 4C8.14348 4 6.36256 4.73705 5.0498 6.0498C3.73705 7.36256 3 9.14348 3 11C3 14.0763 4.26371 16.8622 6.30371 18.8613L6.72168 19.251L6.79492 19.3223C7.13901 19.6945 7.15236 20.274 6.80957 20.6621C6.44389 21.076 5.81134 21.1147 5.39746 20.749C2.70189 18.3672 1 14.8783 1 11C1 8.61305 1.94791 6.32357 3.63574 4.63574C5.32357 2.94791 7.61305 2 10 2C12.3869 2 14.6764 2.94791 16.3643 4.63574C18.0521 6.32357 19 8.61305 19 11C19 12.3261 18.4728 13.5975 17.5352 14.5352C16.6561 15.4142 15.4838 15.9328 14.248 15.9941L14 16C12.6739 16 11.4025 15.4728 10.4648 14.5352C9.52716 13.5975 9 12.3261 9 11Z" fill="#C0C0C0"/>
                </svg>
                Lucide Icons
            </div>
            <div class="tech-item" data-tech="manus" data-url="#">
                <svg fill="currentColor" fill-rule="evenodd" height="1em" style="flex:none;line-height:1" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>Manus</title><path d="M8.047 1.163A.936.936 0 119.863.709c.063.256.132.508.2.76l.005.016c.158.58.315 1.16.416 1.771a.936.936 0 11-1.847.305c-.085-.517-.203-.949-.346-1.473v-.002c-.075-.274-.157-.573-.244-.923zM3.67 2.753a.936.936 0 00.428 1.252c.667.327 1.245.65 1.818 1.295a.936.936 0 001.4-1.242C6.5 3.138 5.66 2.687 4.922 2.325a.936.936 0 00-1.252.428z"></path><path clip-rule="evenodd" d="M15.672 21.284c-.17-.036-.356-.075-.546-.117-.7-.152-1.65-.365-2.097-.513l-.033-.011-.032-.012c-.198-.074-.534-.156-1.09-.283l-.103-.023c-.48-.11-1.07-.244-1.63-.413-.578-.176-1.294-.437-1.903-.862-.638-.446-1.364-1.232-1.404-2.412a5.024 5.024 0 01.009-.51 2.716 2.716 0 01-.65-1.24 2.632 2.632 0 01.03-1.275c.083-.317.21-.594.316-.8.036-.07.073-.14.11-.206-.35-.111-.747-.248-1.133-.412-.503-.215-1.218-.57-1.752-1.141a2.798 2.798 0 01-.71-1.327 2.55 2.55 0 01.226-1.68c.604-1.208 1.757-1.635 2.782-1.672.926-.033 1.912.226 2.795.536.804.282 1.955.807 2.933 1.264.322-.529.747-1.126 1.149-1.608l.08-.095.092-.084a3.43 3.43 0 012.06-.887 3.559 3.559 0 011.059.08l.036.008.023.007h.003l.002.001s.002 0-.477 1.786l.479-1.786.208.058.19.102c.964.516 1.238 1.406 1.31 1.876a2.9 2.9 0 01-.008.903l-.003.018v.005l-1.858-.37 1.857.371-.01.054-.3 1.19c-.058.292-.065.459-.062.547a.286.286 0 00.016.107v.001c.013.03.043.095.154.263.043.066.088.131.144.214l.058.084c.08.118.174.257.274.412.623.97.684 1.902.68 2.499v.026l.238.078.103.032.153.049c.076.024.173.056.267.09.11-.202.407-.636.945-.636.702 0 .99.987.99.987.275 1.838-.98 8.013-2.794 9.164-1.386.88-2.413-.427-3.176-2.437zM8.72 12.868c.118-.119.47-.37 1.136-.445a4.337 4.337 0 012.228.365c.623.276 1.053.908 1.233 1.667.088.371.104.731.066 1.025-.04.31-.128.465-.169.511-.05.058-.228.157-.721.053a3.417 3.417 0 01-.764-.266l-.006-.003a.936.936 0 00-.861 1.662h.001l.003.002.008.004.024.012a4.888 4.888 0 00.34.152c.215.086.52.194.866.267.615.13 1.75.23 2.52-.652.37-.424.548-.98.615-1.501a4.789 4.789 0 00-.1-1.697c-.268-1.128-.976-2.362-2.297-2.948a6.208 6.208 0 00-3.195-.513c-.619.07-1.211.242-1.69.504l-.02-.006h-.004c-1.183-.338-3.536-1.01-2.956-2.17.44-.88 1.643-.807 3.275-.234.663.232 1.584.647 2.453 1.051.27.125.534.25.784.367l.974.454c.693-.832.962-1.29 1.2-1.695.163-.278.312-.53.573-.862l.025-.032a9.902 9.902 0 01.146-.18.895.895 0 01.02-.017c.642-.567 1.389-.36 1.389-.36.427.228.318.806.318.806l-.296 1.178c-.284 1.386.03 1.845.547 2.6.09.133.188.275.29.433.412.643.392 1.26.377 1.765-.01.324-.019.602.09.809.224.425 1.06.69 1.61.862.132.042.247.078.333.11l.059.023c-.078.24-.148.489-.218.737-.313 1.103-.623 2.202-1.55 2.53-.632.225-1.263.214-1.71.156-.786-.17-1.716-.379-2.066-.495-.363-.135-.871-.25-1.424-.377-1.316-.3-2.883-.656-3.331-1.462a.975.975 0 01-.125-.447c-.026-.74.234-1.404.234-1.404s-.403.002-.685-.27a.853.853 0 01-.238-.431c-.03-.13-.042-.28-.025-.44.008 0 .012-.008.012-.028 0-.234.234-.702.702-1.17z"></path><path d="M14.077.604a.936.936 0 01.315 1.285c-.355.584-.561 1.181-.786 2.081a.936.936 0 11-1.816-.454c.243-.971.504-1.778 1.002-2.598a.936.936 0 011.285-.314z"></path></svg>
                Manus AI
            </div>
            <div class="tech-item" data-tech="openprops" data-url="https://open-props.style/">
                <svg viewBox="0 0 316 316" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 0 C8.00908836 7.31538779 14.40354862 15.66446426 20.75 24.4375 C21.43320312 25.37464844 22.11640625 26.31179687 22.8203125 27.27734375 C45.95983379 60.3532477 53.11083132 103.3936086 46.359375 142.71240234 C43.12639072 160.09343474 37.11785189 175.90861707 28.75 191.4375 C28.19570313 192.48550781 27.64140625 193.53351563 27.0703125 194.61328125 C22.80101795 202.32456686 17.56428339 209.11071247 11.99072266 215.90576172 C10.81098106 217.36221563 9.67555865 218.85424125 8.54296875 220.34765625 C7.95128906 221.03730469 7.35960937 221.72695313 6.75 222.4375 C6.09 222.4375 5.43 222.4375 4.75 222.4375 C4.5025 223.05625 4.255 223.675 4 224.3125 C2.54371361 226.78818687 1.37187494 227.38875002 -1.25 228.4375 C-1.25 229.0975 -1.25 229.7575 -1.25 230.4375 C-31.04418172 258.67927946 -72.47877355 273.3045887 -113.20703125 272.62109375 C-150.8652924 271.14267872 -187.13773828 257.29922733 -214.9140625 231.58203125 C-216.99753625 229.66927692 -219.13489367 227.86569576 -221.3125 226.0625 C-249.69848893 201.2105097 -264.7905354 160.24407092 -267.25 123.4375 C-268.80620906 93.49437034 -261.83091141 63.60993094 -247.25 37.4375 C-246.90211426 36.80118652 -246.55422852 36.16487305 -246.19580078 35.50927734 C-241.45495992 26.91067216 -236.05686285 19.38571934 -229.53515625 12.046875 C-227.1747631 9.46642552 -227.1747631 9.46642552 -225.25 6.4375 C-224.59 6.4375 -223.93 6.4375 -223.25 6.4375 C-222.59 5.1175 -221.93 3.7975 -221.25 2.4375 C-220.59 2.4375 -219.93 2.4375 -219.25 2.4375 C-219.25 1.7775 -219.25 1.1175 -219.25 0.4375 C-218.59 0.4375 -217.93 0.4375 -217.25 0.4375 C-217.25 -0.2225 -217.25 -0.8825 -217.25 -1.5625 C-155.46369253 -60.12948083 -61.5211409 -54.08656194 0 0 Z M-192.25 29.4375 C-193.00023437 30.12328125 -193.75046875 30.8090625 -194.5234375 31.515625 C-216.03649784 51.89641901 -227.12803042 81.51108626 -228.49609375 110.73046875 C-229.28628999 140.39842201 -219.06654988 171.11623091 -198.74609375 193.03125 C-197.47076722 194.5516483 -197.47076722 194.5516483 -196.25 194.4375 C-196.24413376 193.38530777 -196.23826752 192.33311554 -196.23222351 191.2490387 C-196.17464575 181.26192806 -196.10170632 171.27502787 -196.01428509 161.28813267 C-195.96983528 156.15556515 -195.93052554 151.0230724 -195.90356445 145.89038086 C-195.87727523 140.92351157 -195.83669864 135.95693404 -195.78681374 130.99024773 C-195.77031617 129.10918791 -195.75869672 127.22807783 -195.75238609 125.34695625 C-195.64892699 97.30379404 -189.75903995 72.98190037 -169.25 52.4375 C-168.56421875 51.74011719 -167.8784375 51.04273438 -167.171875 50.32421875 C-150.81011249 34.71994524 -128.11998978 27.96757005 -105.8984375 28.2265625 C-82.44515716 29.58253374 -61.50073442 39.33446528 -45.1484375 56.30078125 C-32.64590252 70.37256445 -24.0301855 89.51800169 -23.25 108.4375 C-23.1984375 109.37335938 -23.146875 110.30921875 -23.09375 111.2734375 C-22.4172601 134.10497167 -30.22962318 155.76838404 -45.625 172.75 C-62.45596142 190.5681399 -84.49110567 199.97140253 -109 200.75 C-126.16474205 200.36145058 -141.15936057 195.44477806 -156.25 187.4375 C-157.63421065 188.59418501 -157.63421065 188.59418501 -157.36352539 191.76391602 C-157.36336629 193.23975556 -157.35767314 194.71560069 -157.34765625 196.19140625 C-157.3462413 196.96685287 -157.34482635 197.7422995 -157.34336853 198.54124451 C-157.33775345 201.02753494 -157.32519846 203.5137366 -157.3125 206 C-157.30748694 207.68163933 -157.3029237 209.36328006 -157.29882812 211.04492188 C-157.28777913 215.17581566 -157.27050445 219.30664276 -157.25 223.4375 C-154.75108499 224.40634335 -152.24958565 225.36733159 -149.74609375 226.32421875 C-149.04947632 226.59520386 -148.35285889 226.86618896 -147.63513184 227.14538574 C-140.64214824 229.80543012 -133.64422561 231.26769335 -126.25 232.4375 C-125.47785156 232.56898438 -124.70570313 232.70046875 -123.91015625 232.8359375 C-93.83486819 237.10766747 -62.01395028 228.05365258 -37.83447266 209.99072266 C-11.63270259 189.54241596 5.0224748 161.14464383 9.28515625 128.10546875 C12.67909787 97.17504801 3.90079739 66.06244755 -14.9375 41.375 C-18.60846992 36.97430381 -22.60119271 32.88842518 -26.625 28.8125 C-27.24463623 28.18335693 -27.86427246 27.55421387 -28.50268555 26.90600586 C-29.37920776 26.03600952 -29.37920776 26.03600952 -30.2734375 25.1484375 C-30.79856934 24.62556152 -31.32370117 24.10268555 -31.86474609 23.56396484 C-33.21104228 22.22719609 -33.21104228 22.22719609 -35.25 22.4375 C-35.25 21.7775 -35.25 21.1175 -35.25 20.4375 C-37.59387579 18.77243499 -39.92481777 17.24487552 -42.375 15.75 C-43.10565674 15.30301758 -43.83631348 14.85603516 -44.58911133 14.39550781 C-92.97372968 -14.84834656 -151.07344809 -9.45891711 -192.25 29.4375 Z M-141.75 78.8125 C-145.65771075 82.55321456 -148.57076963 86.75682075 -151.25 91.4375 C-151.641875 92.10136719 -152.03375 92.76523438 -152.4375 93.44921875 C-157.74671572 103.69678586 -158.70871431 117.52270483 -155.25 128.4375 C-149.51921154 142.51798563 -141.70306126 151.91673569 -127.9375 158.6875 C-115.93890509 163.66608365 -102.97453745 163.54604964 -90.9765625 158.72265625 C-78.4400178 152.81359722 -69.92874348 144.85588639 -64.4453125 132.03125 C-60.04134996 118.79057831 -60.28216946 105.83405907 -66.4375 93.1875 C-71.27895288 83.85826156 -77.14152584 77.65120923 -86.25 72.4375 C-86.91386719 72.045625 -87.57773438 71.65375 -88.26171875 71.25 C-105.85192352 62.13659867 -126.9168347 66.6685536 -141.75 78.8125 Z " transform="translate(267.25,43.5625)"/>
                </svg>
                Open Props
            </div>
            <div class="tech-item" data-tech="vscode" data-url="https://code.visualstudio.com/">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><path d="M493.8,55.2L388.5,4.5c-12.3-5.9-26.8-3.4-36.4,6.2L150.3,194.8l-87.9-66.7c-8.2-6.3-19.7-5.7-27.2,1.2L7,154.9 c-9.3,8.4-9.3,23.1-0.1,31.5L83.2,256L6.9,325.6c-9.2,8.4-9.2,23.1,0.1,31.5l28.2,25.7c7.7,6.9,19.1,7.4,27.2,1.2l87.9-66.7 l201.8,184.1c9.5,9.6,24.1,12.1,36.3,6.2l105.4-50.7c11.1-5.3,18.1-16.5,18.1-28.8V84C512,71.7,504.9,60.5,493.8,55.2L493.8,55.2z M384.1,372.3L230.9,256l153.2-116.3V372.3z"/></g></svg>
                VS Code
            </div>
        </div>

        <!-- This is the new, single info panel that will be dynamically updated -->
        <div class="info-panel-a" id="info-panel">
            <!-- Content will be injected here by JavaScript -->
        </div>
    </div>

            
    </div> <!-- END: 2-Column Grid Wrapper -->

              <!-- Color System Section -->
              <section id="colors" class="content-section">
                  <div class="token-category">
                      <div class="category-header">
                          <h2 class="section-title-primary">
                              <i data-icon="palette"></i>Color System
                          </h2>
                          <p class="section-description">
                              Comprehensive color palette with brand colors, neutrals, categories, and alpha values. Desktop uses expanded layout, mobile uses compact reference.
                          </p>
                      </div>
                      <div id="colors-section-container"></div>
                  </div>
              </section>

                <!-- Typography Section -->
                <section id="typography" class="content-section">
        <div class="token-category">
            <div class="category-header">
                <h2 class="section-title-primary">
                    <i data-icon="type"></i>Typography</h2>
                <p class="section-description">
                    Foundational type scale and font definitions - the typographic building blocks that establish hierarchy and readability.
                </p>
            </div>
            <div class="tokens-grid text-grid">
                <div class="example-container">
                    <div class="flex flex-col gap-3">
                        <div>
                            <div class="text-heading-xl">Heading XL</div>
                            <code class="text-color-muted text-size-0">.text-heading-xl • var(--font-size-8)</code>
                        </div>
                        <div>
                            <div class="text-heading-lg">Heading LG</div>
                            <code class="text-color-muted text-size-0">.text-heading-lg • var(--font-size-6)</code>
                        </div>
                        <div>
                            <div class="text-heading-md">Heading MD</div>
                            <code class="text-color-muted text-size-0">.text-heading-md • var(--font-size-4)</code>
                        </div>
                        <div>
                            <div class="text-body-lg">Body Large</div>
                            <code class="text-color-muted text-size-0">.text-body-lg • var(--font-size-2)</code>
                        </div>
                        <div>
                            <div class="text-body-md">Body Medium</div>
                            <code class="text-color-muted text-size-0">.text-body-md • var(--font-size-1)</code>
                        </div>
                        <div>
                            <div class="text-label">LABEL TEXT</div>
                            <code class="text-color-muted text-size-0">.text-label • var(--font-size-0)</code>
                        </div>
                        <div>
                            <div class="text-caption">Caption Text</div>
                            <code class="text-color-muted text-size-0">.text-caption • var(--font-size-00)</code>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tokens-grid font-grid">
                <div class="token-item"><div class="token-info"><div class="token-name">--font-sans</div><div class="token-value">'Inter', -apple-system, ...</div><div class="text-preview font-sans">The quick brown fox jumps over the lazy dog.</div></div></div>
                <div class="token-item"><div class="token-info"><div class="token-name">--font-mono</div><div class="token-value">'Monaco', 'Menlo', monospace</div><div class="text-preview font-mono">const greeting = "Hello, World!";</div></div></div>
            </div>
        </div>
    </section>

                <!-- Spacing Section -->
                <section id="spacing" class="content-section">
                    <div class="token-category">
                        <div class="category-header"><h2 class="section-title-primary"><i data-icon="move"></i>Spacing</h2><p class="section-description">Raw spacing values that serve as the foundation for all margin, padding, and gap measurements.</p></div>
                        <div class="tokens-grid spacing-grid">
                            <div class="token-item"><div class="token-info"><div class="token-name">--size-1</div><div class="token-value">0.25rem • 4px</div><div class="token-preview"><div class="spacing-preview"><div class="spacing-bar w-1 h-1"></div></div></div></div></div>
                            <div class="token-item"><div class="token-info"><div class="token-name">--size-2</div><div class="token-value">0.5rem • 8px</div><div class="token-preview"><div class="spacing-preview"><div class="spacing-bar w-2 h-2"></div></div></div></div></div>
                            <div class="token-item"><div class="token-info"><div class="token-name">--size-3</div><div class="token-value">0.75rem • 12px</div><div class="token-preview"><div class="spacing-preview"><div class="spacing-bar w-3 h-3"></div></div></div></div></div>
                            <div class="token-item"><div class="token-info"><div class="token-name">--size-4</div><div class="token-value">1rem • 16px</div><div class="token-preview"><div class="spacing-preview"><div class="spacing-bar w-4 h-4"></div></div></div></div></div>
                            <div class="token-item"><div class="token-info"><div class="token-name">--size-6</div><div class="token-value">1.5rem • 24px</div><div class="token-preview"><div class="spacing-preview"><div class="spacing-bar w-6 h-6"></div></div></div></div></div>
                            <div class="token-item"><div class="token-info"><div class="token-name">--size-8</div><div class="token-value">2rem • 32px</div><div class="token-preview"><div class="spacing-preview"><div class="spacing-bar w-8 h-8"></div></div></div></div></div>
                        </div>
                    </div>
                </section>

                <!-- Effects Section -->
                <section id="effects" class="content-section">
                    <div class="token-category">
                        <div class="category-header">
                            <h2 class="section-title-primary"><i data-icon="layers"></i>Effects</h2>
                            <p class="section-description">Visual effects including elevation shadows, glass morphism, and glow effects for creating depth and hierarchy.</p>
                        </div>
                        
                        <!-- Elevation Shadows -->
                        <div class="effects-subsection">
                            <h3 class="text-label" style="margin-bottom: var(--size-3);">Elevation Shadows</h3>
                            <div class="tokens-grid shadow-grid" style="margin-bottom: var(--size-6);">
                                <div class="token-item"><div class="token-info"><div class="token-name">--shadow-2</div><div class="token-value">Subtle elevation</div><div class="token-preview"><div class="shadow-preview shadow-2"></div></div></div></div>
                                <div class="token-item"><div class="token-info"><div class="token-name">--shadow-3</div><div class="token-value">Medium elevation</div><div class="token-preview"><div class="shadow-preview shadow-3"></div></div></div></div>
                                <div class="token-item"><div class="token-info"><div class="token-name">--shadow-4</div><div class="token-value">High elevation</div><div class="token-preview"><div class="shadow-preview shadow-4"></div></div></div></div>
                            </div>
                        </div>
                        
                        <!-- Glass Effects -->
                        <div class="effects-subsection">
                            <h3 class="text-label" style="margin-bottom: var(--size-3);">Glass Effects</h3>
                            <p class="section-description" style="margin-bottom: var(--size-3);">Combine background opacity with backdrop blur for modern glass morphism effects. Each level pairs specific opacity with blur intensity.</p>
                            <div class="tokens-grid glass-grid" style="margin-bottom: var(--size-6);">
                                <div class="token-item">
                                    <div class="token-info">
                                        <div class="token-name">--glass-panel-zero</div>
                                        <div class="token-value">0% opacity, blur only</div>
                                        <div class="token-preview">
                                            <div class="glass-preview-container">
                                                <div class="glass-preview-bg"></div>
                                                <div class="glass-preview-panel" style="background: var(--glass-panel-zero); backdrop-filter: blur(var(--glass-blur-light)); -webkit-backdrop-filter: blur(var(--glass-blur-light));">
                                                    <span>Zero</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="token-item">
                                    <div class="token-info">
                                        <div class="token-name">--glass-panel-subtle</div>
                                        <div class="token-value">20% opacity, 8px blur</div>
                                        <div class="token-preview">
                                            <div class="glass-preview-container">
                                                <div class="glass-preview-bg"></div>
                                                <div class="glass-preview-panel" style="background: var(--glass-panel-subtle); backdrop-filter: blur(var(--glass-blur-medium)); -webkit-backdrop-filter: blur(var(--glass-blur-medium));">
                                                    <span>Subtle</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="token-item">
                                    <div class="token-info">
                                        <div class="token-name">--glass-panel-medium</div>
                                        <div class="token-value">40% opacity, 12px blur</div>
                                        <div class="token-preview">
                                            <div class="glass-preview-container">
                                                <div class="glass-preview-bg"></div>
                                                <div class="glass-preview-panel" style="background: var(--glass-panel-medium); backdrop-filter: blur(var(--glass-blur-strong)); -webkit-backdrop-filter: blur(var(--glass-blur-strong));">
                                                    <span>Medium</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="token-item">
                                    <div class="token-info">
                                        <div class="token-name">--glass-panel-strong</div>
                                        <div class="token-value">60% opacity, 16px blur</div>
                                        <div class="token-preview">
                                            <div class="glass-preview-container">
                                                <div class="glass-preview-bg"></div>
                                                <div class="glass-preview-panel" style="background: var(--glass-panel-strong); backdrop-filter: blur(var(--glass-blur-heavy)); -webkit-backdrop-filter: blur(var(--glass-blur-heavy));">
                                                    <span>Strong</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Glow Effects -->
                        <div class="effects-subsection">
                            <h3 class="text-label" style="margin-bottom: var(--size-3);">Glow Effects</h3>
                            <div class="tokens-grid glow-grid">
                                <div class="token-item">
                                    <div class="token-info">
                                        <div class="token-name">--shadow-brand</div>
                                        <div class="token-value">Brand color glow</div>
                                        <div class="token-preview">
                                            <div class="glow-preview" style="box-shadow: var(--shadow-brand);">
                                                <i data-icon="star" style="color: var(--brand-primary);"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="token-item">
                                    <div class="token-info">
                                        <div class="token-name">--shadow-brand-hover</div>
                                        <div class="token-value">Stronger brand glow</div>
                                        <div class="token-preview">
                                            <div class="glow-preview" style="box-shadow: var(--shadow-brand-hover);">
                                                <i data-icon="zap" style="color: var(--brand-primary);"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="token-item">
                                    <div class="token-info">
                                        <div class="token-name">--focus-ring</div>
                                        <div class="token-value">Focus state glow</div>
                                        <div class="token-preview">
                                            <div class="glow-preview" style="box-shadow: var(--focus-ring);">
                                                <i data-icon="target" style="color: var(--brand-primary);"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Border Section -->
                <section id="border" class="content-section">
                    <div class="token-category">
                        <div class="category-header">
                            <h2 class="section-title-primary"><i data-icon="square"></i>Borders</h2>
                            <p class="section-description">Border width values for consistent strokes and outlines throughout the interface.</p>
                        </div>
                        <div class="tokens-grid border-grid">
                            <div class="token-item">
                                <div class="token-info">
                                    <div class="token-name">--border-size-1</div>
                                    <div class="token-value">1px</div>
                                    <div class="token-preview">
                                        <div class="border-preview" style="border-width: var(--border-size-1);"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="token-item">
                                <div class="token-info">
                                    <div class="token-name">--border-size-2</div>
                                    <div class="token-value">2px</div>
                                    <div class="token-preview">
                                        <div class="border-preview" style="border-width: var(--border-size-2);"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="token-item">
                                <div class="token-info">
                                    <div class="token-name">--border-size-3</div>
                                    <div class="token-value">3px</div>
                                    <div class="token-preview">
                                        <div class="border-preview" style="border-width: var(--border-size-3);"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="token-item">
                                <div class="token-info">
                                    <div class="token-name">--border-size-4</div>
                                    <div class="token-value">4px</div>
                                    <div class="token-preview">
                                        <div class="border-preview" style="border-width: var(--border-size-4);"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Border Radius Section -->
                <section id="border-radius" class="content-section">
                    <div class="token-category">
                        <div class="category-header"><h2 class="section-title-primary"><i data-icon="square"></i>Radius</h2><p class="section-description">Base radius values that create consistent corner treatments throughout the interface.</p></div>
                        <div class="tokens-grid radius-grid">
                            <div class="token-item"><div class="token-info"><div class="token-name">--radius-1</div><div class="token-value">Small radius</div><div class="token-preview"><div class="radius-preview rounded-1"></div></div></div></div>
                            <div class="token-item"><div class="token-info"><div class="token-name">--radius-2</div><div class="token-value">Medium radius</div><div class="token-preview"><div class="radius-preview rounded-2"></div></div></div></div>
                            <div class="token-item"><div class="token-info"><div class="token-name">--radius-3</div><div class="token-value">Large radius</div><div class="token-preview"><div class="radius-preview rounded-3"></div></div></div></div>
                            <div class="token-item"><div class="token-info"><div class="token-name">--radius-round</div><div class="token-value">Full round</div><div class="token-preview"><div class="radius-preview rounded-full"></div></div></div></div>
                        </div>
                    </div>
                </section>


                <!-- Motion Section -->
                <section id="animations" class="content-section">
                    <div class="token-category">
                        <div class="category-header"><h2 class="section-title-primary"><i data-icon="play"></i>Motion</h2><p class="section-description">Raw timing and easing values that power smooth, consistent motion throughout the interface.</p></div>
                        <div class="tokens-grid animation-grid">
                            <div class="token-item"><div class="token-info"><div class="token-name">--ease-3</div><div class="token-value">cubic-bezier(.25, 0, .3, 1)</div><div class="text-preview"><div style="color: var(--color-text-muted);">Standard easing curve</div></div></div></div>
                            <div class="token-item"><div class="token-info"><div class="token-name">--ease-spring-3</div><div class="token-value">cubic-bezier(.5, -1, .1, 1.8)</div><div class="text-preview"><div style="color: var(--color-text-muted);">Playful spring easing</div></div></div></div>
                            <div class="token-item"><div class="token-info"><div class="token-name">--animation-duration-2</div><div class="token-value">150ms</div><div class="text-preview"><div style="color: var(--color-text-muted);">Standard duration</div></div></div></div>
                        </div>
                        
                    </div>
                </section>
                <!-- Icons Section -->
                <section id="icons" class="content-section">
                    <div class="token-category">
                        <div class="category-header">
                            <h2 class="section-title-primary">
                                <i data-icon="sparkles"></i>Icons
                            </h2>
                            <p class="section-description">
                                Industry-standard icon system with responsive sizing, design tokens, and optimized SVGs. All icons follow accessibility best practices and support multiple rendering methods. We use <a href="https://lucide.dev" target="_blank" rel="noopener" style="color: var(--brand-secondary); text-decoration: underline;">Lucide Icons</a> because they're lightweight, open source, and align beautifully with modern UI standards — clean, scalable, and customizable.
                            </p>
                        </div>
                        
                        <div class="icons-showcase">
                            <div class="variants-grid" style="grid-template-columns: 1fr;">
                                
                                <!-- Variable Types (4 icons) -->
                                <div class="example-wrapper">
                                    <div class="example-label">Variable Types</div>
                                    <div class="example-container">
                                        <div class="icons-grid-responsive">
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="palette" style="color: var(--value-color);"></i>
                                                <code class="icon-code">color</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="type" style="color: var(--value-text);"></i>
                                                <code class="icon-code">type</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="hash" style="color: var(--value-number);"></i>
                                                <code class="icon-code">numbers</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="toggle-right" style="color: var(--value-state);"></i>
                                                <code class="icon-code">states</code>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Navigation (8 icons) -->
                                <div class="example-wrapper">
                                    <div class="example-label">Navigation</div>
                                    <div class="example-container">
                                        <div class="icons-grid-responsive">
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="chevron-down"></i>
                                                <code class="icon-code">chevron-down</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="chevron-up"></i>
                                                <code class="icon-code">chevron-up</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="chevron-left"></i>
                                                <code class="icon-code">chevron-left</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="chevron-right"></i>
                                                <code class="icon-code">chevron-right</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="arrow-left"></i>
                                                <code class="icon-code">arrow-left</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="arrow-right"></i>
                                                <code class="icon-code">arrow-right</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="arrow-up-right"></i>
                                                <code class="icon-code">arrow-up-right</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="external-link"></i>
                                                <code class="icon-code">external-link</code>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Functional (16 icons) -->
                                <div class="example-wrapper">
                                    <div class="example-label">Functional</div>
                                    <div class="example-container">
                                        <div class="icons-grid-responsive">
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="x"></i>
                                                <code class="icon-code">close</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="plus"></i>
                                                <code class="icon-code">plus</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="minus"></i>
                                                <code class="icon-code">minus</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="rocket"></i>
                                                <code class="icon-code">rocket</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="sliders-horizontal"></i>
                                                <code class="icon-code">filters</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="file-text"></i>
                                                <code class="icon-code">export</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="layers"></i>
                                                <code class="icon-code">layers</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="package"></i>
                                                <code class="icon-code">package</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="copy"></i>
                                                <code class="icon-code">copy</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="check"></i>
                                                <code class="icon-code">check</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="download"></i>
                                                <code class="icon-code">download</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="zap"></i>
                                                <code class="icon-code">zap</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="sparkles"></i>
                                                <code class="icon-code">sparkles</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="briefcase"></i>
                                                <code class="icon-code">briefcase</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="component"></i>
                                                <code class="icon-code">component</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="wand"></i>
                                                <code class="icon-code">wand</code>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Status & Feedback (4 icons) -->
                                <div class="example-wrapper">
                                    <div class="example-label">Status & Feedback</div>
                                    <div class="example-container">
                                        <div class="icons-grid-responsive">
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="check-circle"></i>
                                                <code class="icon-code">check-circle</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="circle-x"></i>
                                                <code class="icon-code">circle-x</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="circle-alert"></i>
                                                <code class="icon-code">circle-alert</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="info"></i>
                                                <code class="icon-code">info</code>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Social (4 icons) -->
                                <div class="example-wrapper">
                                    <div class="example-label">Social</div>
                                    <div class="example-container">
                                        <div class="icons-grid-responsive">
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="github"></i>
                                                <code class="icon-code">github</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="linkedin"></i>
                                                <code class="icon-code">linkedin</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="figma"></i>
                                                <code class="icon-code">figma</code>
                                            </div>
                                            <div class="icon-card">
                                                <i class="icon icon--xxl" data-icon="mail"></i>
                                                <code class="icon-code">mail</code>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Size Variations -->
                                <div class="example-wrapper">
                                    <div class="example-label">Size Variations</div>
                                    <div class="example-container">
                                        <div class="icon-sizes-grid">
                                            <div class="icon-size-card">
                                                <i data-icon="rocket" style="width: var(--icon-xs); height: var(--icon-xs);"></i>
                                                <code>--icon-xs</code>
                                                <span class="size-value">12px</span>
                                            </div>
                                            <div class="icon-size-card">
                                                <i data-icon="rocket" style="width: var(--icon-sm); height: var(--icon-sm);"></i>
                                                <code>--icon-sm</code>
                                                <span class="size-value">16px</span>
                                            </div>
                                            <div class="icon-size-card">
                                                <i data-icon="rocket" style="width: var(--icon-md); height: var(--icon-md);"></i>
                                                <code>--icon-md</code>
                                                <span class="size-value">20px</span>
                                            </div>
                                            <div class="icon-size-card">
                                                <i data-icon="rocket" style="width: var(--icon-lg); height: var(--icon-lg);"></i>
                                                <code>--icon-lg</code>
                                                <span class="size-value">24px</span>
                                            </div>
                                            <div class="icon-size-card">
                                                <i data-icon="rocket" style="width: var(--icon-xl); height: var(--icon-xl);"></i>
                                                <code>--icon-xl</code>
                                                <span class="size-value">32px</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Stroke Weights -->
                                <div class="example-wrapper">
                                    <div class="example-label">Stroke Weights</div>
                                    <div class="example-container">
                                        <div class="icon-weights-grid">
                                            <div class="icon-weight-card hairline">
                                                <i data-icon="feather" style="width: 48px; height: 48px;"></i>
                                                <code>--icon-stroke-hairline</code>
                                                <span class="weight-value">1px</span>
                                            </div>
                                            <div class="icon-weight-card thin">
                                                <i data-icon="feather" style="width: 48px; height: 48px;"></i>
                                                <code>--icon-stroke-thin</code>
                                                <span class="weight-value">1.5px</span>
                                            </div>
                                            <div class="icon-weight-card regular">
                                                <i data-icon="feather" style="width: 48px; height: 48px;"></i>
                                                <code>--icon-stroke-regular</code>
                                                <span class="weight-value">2px</span>
                                            </div>
                                            <div class="icon-weight-card bold">
                                                <i data-icon="feather" style="width: 48px; height: 48px;"></i>
                                                <code>--icon-stroke-bold</code>
                                                <span class="weight-value">2.5px</span>
                                            </div>
                                            <div class="icon-weight-card heavy">
                                                <i data-icon="feather" style="width: 48px; height: 48px;"></i>
                                                <code>--icon-stroke-heavy</code>
                                                <span class="weight-value">3px</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div> <!-- END: variants-grid -->
                        </div> <!-- END: icons-showcase -->
                    </div> <!-- END: token-category -->
                </section>

                <!-- COMPONENT LIBRARY SECTION -->

      <!-- REFACTORED: Token Card Section -->
<div id="token-card" class="component-section">
    <div class="component-header">
        <h2 class="section-title-primary"><i data-icon="credit-card"></i> Cards</h2>
        <p class="section-description">The central dashboard component that displays the total count of design tokens. It transforms to show different states like loading, success, or an empty state if no tokens are found.</p>
    </div>
    <div class="component-body">
      
        <div class="variants-grid">
            <!-- Card 1: Default State -->
            <div class="example-wrapper">
                <div class="example-label">Default State</div>
                <div class="example-container">
                    <!-- @include src/components/_token-card-default.html -->
                </div>
            </div>

            <!-- Card 2: Advanced Mode -->
            <div class="example-wrapper">
                <div class="example-label">Advanced Mode</div>
                <div class="example-container">
                    <!-- @include src/components/_token-card-advanced.html -->
                </div>
            </div>

            <!-- Card 3: Loading Skeleton -->
            <div class="example-wrapper">
                <div class="example-label">Loading State</div>
                <div class="example-container">
                    <!-- src/components/_skeleton-loader.html -->
<div class="card token-summary is-loading" id="skeleton-loader">
    <div class="text-heading-xl token-count-total"><span class="skeleton-pulse"></span></div>
    <div class="text-label token-label">Tokens Loading...</div> <!-- Use a non-breaking space to maintain height -->
    <div class="token-breakdown">
        <!-- Color Stat -->
        <div class="token-type-stat color loading">
            <span class="icon" data-icon="palette"></span>
            <div class="count skeleton-pulse"></div>
            <div class="text-label label">colors</div>
        </div>
        <!-- Text Stat -->
        <div class="token-type-stat text loading">
            <span class="icon" data-icon="type"></span>
            <div class="count skeleton-pulse"></div>
            <div class="text-label label">text</div>
        </div>
        <!-- Number Stat -->
        <div class="token-type-stat number loading">
            <span class="icon" data-icon="hash"></span>
            <div class="count skeleton-pulse"></div>
            <div class="text-label label">numbers</div>
        </div>
        <!-- States Stat -->
        <div class="token-type-stat states loading">
            <span class="icon" data-icon="toggle-right"></span>
            <div class="count skeleton-pulse"></div>
            <div class="text-label label">states</div>
        </div>
    </div>
</div>
                </div>
            </div> 

                <!-- Card 4: Progress Flow -->
            <div class="example-wrapper">
                <div class="example-label">Progress Flow</div>
                <div class="example-container">
                    <!-- @include src/components/_progress-flow-demo.html -->
                </div>
                <button class="btn btn-secondary btn-md" onclick="demoGuideExport()">
                    <i data-icon="play"></i>
                    <span>Play Demo</span>
                </button>
            </div>


            <!-- Card 5: Empty State (Now using a partial) -->
            <div class="example-wrapper">
                <div class="example-label">Empty State</div>
                <div class="example-container">
                    <!-- src/components/_empty-state.html -->
<!-- Single Source of Truth for the "Empty State" component. -->
<div class="card empty-state" id="empty-state">
    <!-- Top Group -->
    <div class="flex flex-col items-center gap-2">
        <div class="empty-state-icon">
            <div class="token-exporter-logo large">
                <svg viewBox="0 0 355 355" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_empty_logo_refactor)"><path d="M0 0H355V355H0V0Z" fill="url(#paint0_linear_empty_logo_refactor)"/><circle cx="133.5" cy="177.5" r="99.5" fill="black" fill-opacity="0.42"/><path d="M178 88.4824C210.612 104.817 233 138.543 233 177.5C233 216.456 210.611 250.182 178 266.517C145.389 250.182 123 216.456 123 177.5C123 138.543 145.388 104.817 178 88.4824Z" fill="black"/><circle cx="222.5" cy="177.5" r="99.5" fill="black" fill-opacity="0.42"/></g><defs><linearGradient id="paint0_linear_empty_logo_refactor" x1="177.5" y1="0" x2="177.5" y2="355" gradientUnits="userSpaceOnUse"><stop stop-color="#D2FF37"/><stop offset="1" stop-color="#EEFF00"/></linearGradient><clipPath id="clip0_empty_logo_refactor"><rect width="355" height="355" rx="58" fill="white"/></clipPath></defs></svg>
            </div>
        </div>
        <div class="flex flex-col items-center gap-2">
            <div class="text-heading-lg empty-state-title">Let's build something!</div>
            <div class="text-body-md empty-state-subtitle">Create a variable collection in Figma to get started.</div>
        </div>
    </div>

    <!-- Middle Group -->
    <div class="empty-state-categories">
        <div class="empty-state-category">
            <span class="icon category-icon-cyan" data-icon="palette"></span>
            <span class="text-label">color</span>
        </div>
        <div class="empty-state-category">
            <span class="icon category-icon-purple" data-icon="type"></span>
            <span class="text-label">text</span>
        </div>
        <div class="empty-state-category">
            <span class="icon category-icon-orange" data-icon="hash"></span>
            <span class="text-label">number</span>
        </div>
        <div class="empty-state-category">
            <span class="icon category-icon-pink" data-icon="toggle-right"></span>
            <span class="text-label">states</span>
        </div>
    </div>

    <!-- Bottom Button -->
    <a href="https://help.figma.com/hc/en-us/articles/15339657135383-Guide-to-variables-in-Figma" class="btn btn-primary btn-gradient-brand btn-no-borders btn-shadow-none btn-bright btn-md btn-inline" target="_blank" rel="noopener noreferrer" aria-label="Learn about Variables in Figma">
        Learn about Variables <span class="icon" data-icon="external-link"></span>
    </a>
</div>
                </div>
            </div>
            
            <!-- Card 6 & 7: Forms Example (Quick Export & Filters) -->
            <!--
Component: Forms Example
Purpose: Layout wrapper for Quick Export and Filters cards
Note: Uses individual card components via @include directives
-->
<!-- Card 6: Quick Export -->
<div class="example-wrapper">
    <div class="example-label">Quick Export</div>
    <div class="example-container">
        <!-- @include src/components/_quick-export-card.html -->
    </div>
</div>

<!-- Card 7: Filters -->
<div class="example-wrapper">
    <div class="example-label">Filters</div>
    <div class="example-container">
        <!-- src/components/_filters-card.html -->
<!-- Component: Filters Card -->
<!-- Purpose: Collection-based filtering interface for token selection -->
<div class="card filter-section is-compact">
    <div class="card-content">
        <div style="display: flex; align-items: center; gap: var(--size-2); margin-bottom: var(--size-3);">
            <i data-icon="sliders-horizontal" style="width: 1em; height: 1em;"></i>
            <h4 class="text-label">Filters</h4>
        </div>
        <div class="collection-list">
        <!-- Collection 1: Brand -->
        <div class="collection-item selected">
            <div class="collection-checkbox"></div>
            <div class="collection-info">
                <div class="text-body-lg collection-name">Brand</div>
                <div class="collection-pills">
                    <span class="badge small cyan"><span class="icon" data-icon="palette"></span> 12</span>
                    <span class="badge small pink"><span class="icon" data-icon="toggle-right"></span> 2</span>
                </div>
            </div>
            <div class="text-caption collection-count">14 tokens</div>
        </div>
        <!-- Collection 2: Typography -->
        <div class="collection-item selected">
            <div class="collection-checkbox"></div>
            <div class="collection-info">
                <div class="text-body-lg collection-name">Typography</div>
                <div class="collection-pills">
                    <span class="badge small purple"><span class="icon" data-icon="type"></span> 24</span>
                    <span class="badge small orange"><span class="icon" data-icon="hash"></span> 8</span>
                </div>
            </div>
            <div class="text-caption collection-count">32 tokens</div>
        </div>
        <!-- Collection 3: Spacing -->
        <div class="collection-item">
            <div class="collection-checkbox"></div>
            <div class="collection-info">
                <div class="text-body-lg collection-name">Spacing</div>
                <div class="collection-pills">
                    <span class="badge small orange"><span class="icon" data-icon="hash"></span> 16</span>
                </div>
            </div>
            <div class="text-caption collection-count">16 tokens</div>
        </div>
        <!-- Collection 4: Effects -->
        <div class="collection-item">
            <div class="collection-checkbox"></div>
            <div class="collection-info">
                <div class="text-body-lg collection-name">Effects</div>
                <div class="collection-pills">
                    <span class="badge small cyan"><span class="icon" data-icon="palette"></span> 8</span>
                    <span class="badge small orange"><span class="icon" data-icon="hash"></span> 4</span>
                </div>
            </div>
            <div class="text-caption collection-count">12 tokens</div>
        </div>
        <!-- Collection 5: Borders & Radii -->
        <div class="collection-item selected">
            <div class="collection-checkbox"></div>
            <div class="collection-info">
                <div class="text-body-lg collection-name">Borders & Radii</div>
                <div class="collection-pills">
                    <span class="badge small orange"><span class="icon" data-icon="hash"></span> 10</span>
                </div>
            </div>
            <div class="text-caption collection-count">10 tokens</div>
        </div>
    </div>
    </div>
</div>
    </div>
</div>
        </div> <!-- This closes the variants-grid -->
    </div> <!-- This closes the component-body -->
</div> <!-- This closes the component-section#token-card -->
        <!-- ==========================================================================
         START: FINAL, CORRECTED, SYSTEM-ACCURATE BUTTON COMPONENT SECTION
         ========================================================================== -->
    <div id="buttons" class="component-section">
        <div class="component-header">
            <h2 class="section-title-primary"><i data-icon="pointer"></i> Buttons</h2>
            <p class="section-description">A comprehensive button system with multiple variants, sizes, and states. Built for flexibility and consistency across the interface.</p>
        </div>
        <div class="component-body">

            <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
            <!-- BUTTON VARIANTS SHOWCASE    -->
            <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
            <h3 class="example-subheader">Button Variants</h3>
            <p class="section-description section-spacing-sm">Four core button types serve different hierarchical needs. Each variant is fully interactive with hover, active, and disabled states.</p>

            <div class="subsection">
                <div class="example-wrapper">
                    <div class="example-label">Primary</div>
                    <div class="button-showcase">
                        <button class="btn btn-primary btn-sm"><i data-icon="package"></i> Small Button</button>
                        <button class="btn btn-primary btn-md"><i data-icon="package"></i> Medium Button</button>
                        <button class="btn btn-primary btn-lg"><i data-icon="package"></i> Large Button</button>
                    </div>
                </div>
            </div>
            
            <div class="subsection">
                <div class="example-wrapper">
                    <div class="example-label">Secondary</div>
                    <div class="button-showcase">
                        <button class="btn btn-secondary btn-sm"><i data-icon="sliders-horizontal"></i> Small Button</button>
                        <button class="btn btn-secondary btn-md"><i data-icon="sliders-horizontal"></i> Medium Button</button>
                        <button class="btn btn-secondary btn-lg"><i data-icon="sliders-horizontal"></i> Large Button</button>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <div class="example-wrapper">
                    <div class="example-label">Tertiary</div>
                    <div class="button-showcase">
                        <button class="btn btn-tertiary btn-sm">Learn More <i data-icon="arrow-right"></i></button>
                        <button class="btn btn-tertiary btn-md">Learn More <i data-icon="arrow-right"></i></button>
                        <button class="btn btn-tertiary btn-lg">Learn More <i data-icon="arrow-right"></i></button>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <div class="example-wrapper">
                    <div class="example-label">Icon-Only</div>
                    <div class="icon-only-showcase">
                        <button class="btn btn-icon btn-sm" aria-label="Small Icon Button"><i data-icon="github"></i></button>
                        <button class="btn btn-icon btn-md" aria-label="Medium Icon Button"><i data-icon="github"></i></button>
                        <button class="btn btn-icon btn-lg" aria-label="Large Icon Button"><i data-icon="github"></i></button>
                    </div>
                </div>
            </div>

            <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
            <!-- USAGE GUIDELINES            -->
            <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
            <h3 class="example-subheader section-spacing-lg">Usage Guidelines</h3>
            <p class="section-description section-spacing-sm">Best practices for implementing buttons to ensure a consistent and intuitive user experience, presented using the system's `.compact-card` component.</p>
            
            <div class="compact-cards">
                <div class="compact-card">
                    <h3><i data-icon="star"></i> Primary Buttons</h3>
                    <p>Use for the single, most important action. Limit to one per container to maintain clear hierarchy (e.g., "Save", "Submit").</p>
                </div>
                <div class="compact-card">
                    <h3><i data-icon="circle"></i> Secondary Buttons</h3>
                    <p>Use for secondary actions that don't compete with the primary one (e.g., "Cancel", "Back", or alternative actions).</p>
                </div>
                <div class="compact-card">
                    <h3><i data-icon="arrow-right-circle"></i> Tertiary Buttons</h3>
                    <p>Use for low-emphasis, supplementary actions that shouldn't distract from the main flow (e.g., "Learn More").</p>
                </div>
                <div class="compact-card">
                    <h3><i data-icon="github"></i> Icon-Only Buttons</h3>
                    <p>Use for common, universally understood actions in tight spaces. Always include an `aria-label` for accessibility.</p>
                </div>
            </div>

            <h4 class="example-subheader section-spacing-md">Icon Placement</h4>
            <div class="compact-cards" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
                 <div class="compact-card">
                    <h3><i data-icon="align-left"></i> Left Icons (Prefix)</h3>
                    <p>Use for icons that represent the action itself. The icon is decorative and supports the text label.</p>
                    <div class="flex flex-col gap-2" style="margin-top: var(--size-4);">
                        <button class="btn btn-primary btn-sm btn-inline"><i data-icon="save"></i> Save Document</button>
                        <button class="btn btn-secondary btn-sm btn-inline"><i data-icon="download"></i> Export Tokens</button>
                        <button class="btn btn-tertiary btn-sm btn-inline"><i data-icon="filter"></i> Filter Results</button>
                    </div>
                </div>
                <div class="compact-card">
                    <h3><i data-icon="align-right"></i> Right Icons (Suffix)</h3>
                    <p>Use for icons that indicate navigation or continuation. The icon implies moving forward to another location.</p>
                     <div class="flex flex-col gap-2" style="margin-top: var(--size-4);">
                        <button class="btn btn-primary btn-sm btn-inline">Continue <i data-icon="arrow-right" class="icon"></i></button>
                        <button class="btn btn-secondary btn-sm btn-inline">Learn More <i data-icon="external-link" class="icon"></i></button>
                        <button class="btn btn-tertiary btn-sm btn-inline">View Details <i data-icon="chevron-right" class="icon"></i></button>
                    </div>
                </div>
            </div>

            <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
            <!-- STATE COMPARISON MATRIX     -->
            <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
            <h3 class="example-subheader" style="margin-top: var(--size-8);">State Reference</h3>
            <p class="section-description" style="margin-bottom: var(--size-4);">Interactive states provide visual feedback. Test all states during implementation.</p>

            <div class="subsection">
                <div class="state-comparison-container">
                    <!-- Desktop: Full grid with all states -->
                    <div class="state-comparison-grid desktop-grid">
                    <!-- Headers -->
                    <div></div> 
                    <div class="example-label">Default</div>
                    <div class="example-label">Hover</div>
                    <div class="example-label">Active</div>
                    <div class="example-label">Focus</div>
                    <div class="example-label">Disabled</div>
                    
                    <!-- Rows -->
                    <div class="state-label">Primary</div>
                    <div class="state-cell"><button class="btn btn-primary btn-md" aria-label="Primary Button Default"><i data-icon="package"></i></button></div>
                    <div class="state-cell"><button class="btn btn-primary btn-md force-hover" aria-label="Primary Button Hover"><i data-icon="package"></i></button></div>
                    <div class="state-cell"><button class="btn btn-primary btn-md force-active" aria-label="Primary Button Active"><i data-icon="package"></i></button></div>
                    <div class="state-cell"><button class="btn btn-primary btn-md force-focus" aria-label="Primary Button Focus"><i data-icon="package"></i></button></div>
                    <div class="state-cell"><button class="btn btn-primary btn-md" disabled aria-label="Primary Button Disabled"><i data-icon="package"></i></button></div>
                    
                    <div class="state-label">Secondary</div>
                    <div class="state-cell"><button class="btn btn-secondary btn-md" aria-label="Secondary Button Default"><i data-icon="settings"></i></button></div>
                    <div class="state-cell"><button class="btn btn-secondary btn-md force-hover" aria-label="Secondary Button Hover"><i data-icon="settings"></i></button></div>
                    <div class="state-cell"><button class="btn btn-secondary btn-md force-active" aria-label="Secondary Button Active"><i data-icon="settings"></i></button></div>
                    <div class="state-cell"><button class="btn btn-secondary btn-md force-focus" aria-label="Secondary Button Focus"><i data-icon="settings"></i></button></div>
                    <div class="state-cell"><button class="btn btn-secondary btn-md" disabled aria-label="Secondary Button Disabled"><i data-icon="settings"></i></button></div>
                    
                    <div class="state-label">Tertiary</div>
                    <div class="state-cell"><button class="btn btn-tertiary btn-md btn-inline">Details</button></div>
                    <div class="state-cell"><button class="btn btn-tertiary btn-md btn-inline force-hover">Details</button></div>
                    <div class="state-cell"><button class="btn btn-tertiary btn-md btn-inline force-active">Details</button></div>
                    <div class="state-cell"><button class="btn btn-tertiary btn-md btn-inline force-focus">Details</button></div>
                    <div class="state-cell"><button class="btn btn-tertiary btn-md btn-inline" disabled>Details</button></div>

                    <div class="state-label">Icon</div>
                    <div class="state-cell"><button class="btn btn-icon btn-md" aria-label="Icon Button Default"><i data-icon="github"></i></button></div>
                    <div class="state-cell"><button class="btn btn-icon btn-md force-hover" aria-label="Icon Button Hover"><i data-icon="github"></i></button></div>
                    <div class="state-cell"><button class="btn btn-icon btn-md force-active" aria-label="Icon Button Active"><i data-icon="github"></i></button></div>
                    <div class="state-cell"><button class="btn btn-icon btn-md force-focus" aria-label="Icon Button Focus"><i data-icon="github"></i></button></div>
                    <div class="state-cell"><button class="btn btn-icon btn-md" disabled aria-label="Icon Button Disabled"><i data-icon="github"></i></button></div>
                    </div>

                    <!-- Mobile: First grid with Default and Hover -->
                    <div class="state-comparison-grid mobile-grid mobile-grid-1">
                    <!-- Headers -->
                    <div></div> 
                    <div class="example-label">Default</div>
                    <div class="example-label">Hover</div>
                    
                    <!-- Rows -->
                    <div class="state-label">Primary</div>
                    <div class="state-cell"><button class="btn btn-primary btn-md" aria-label="Primary Button Default"><i data-icon="package"></i></button></div>
                    <div class="state-cell"><button class="btn btn-primary btn-md force-hover" aria-label="Primary Button Hover"><i data-icon="package"></i></button></div>
                    
                    <div class="state-label">Secondary</div>
                    <div class="state-cell"><button class="btn btn-secondary btn-md" aria-label="Secondary Button Default"><i data-icon="settings"></i></button></div>
                    <div class="state-cell"><button class="btn btn-secondary btn-md force-hover" aria-label="Secondary Button Hover"><i data-icon="settings"></i></button></div>
                    
                    <div class="state-label">Tertiary</div>
                    <div class="state-cell"><button class="btn btn-tertiary btn-md btn-inline">Details</button></div>
                    <div class="state-cell"><button class="btn btn-tertiary btn-md btn-inline force-hover">Details</button></div>

                    <div class="state-label">Icon</div>
                    <div class="state-cell"><button class="btn btn-icon btn-md" aria-label="Icon Button Default"><i data-icon="github"></i></button></div>
                    <div class="state-cell"><button class="btn btn-icon btn-md force-hover" aria-label="Icon Button Hover"><i data-icon="github"></i></button></div>
                    </div>

                    <hr class="state-divider">

                    <!-- Mobile: Second grid with Active and Focus -->
                    <div class="state-comparison-grid mobile-grid mobile-grid-2">
                    <!-- Headers -->
                    <div></div> 
                    <div class="example-label">Active</div>
                    <div class="example-label">Focus</div>
                    
                    <!-- Rows -->
                    <div class="state-label">Primary</div>
                    <div class="state-cell"><button class="btn btn-primary btn-md force-active" aria-label="Primary Button Active"><i data-icon="package"></i></button></div>
                    <div class="state-cell"><button class="btn btn-primary btn-md force-focus" aria-label="Primary Button Focus"><i data-icon="package"></i></button></div>
                    
                    <div class="state-label">Secondary</div>
                    <div class="state-cell"><button class="btn btn-secondary btn-md force-active" aria-label="Secondary Button Active"><i data-icon="settings"></i></button></div>
                    <div class="state-cell"><button class="btn btn-secondary btn-md force-focus" aria-label="Secondary Button Focus"><i data-icon="settings"></i></button></div>
                    
                    <div class="state-label">Tertiary</div>
                    <div class="state-cell"><button class="btn btn-tertiary btn-md btn-inline force-active">Details</button></div>
                    <div class="state-cell"><button class="btn btn-tertiary btn-md btn-inline force-focus">Details</button></div>

                    <div class="state-label">Icon</div>
                    <div class="state-cell"><button class="btn btn-icon btn-md force-active" aria-label="Icon Button Active"><i data-icon="github"></i></button></div>
                    <div class="state-cell"><button class="btn btn-icon btn-md force-focus" aria-label="Icon Button Focus"><i data-icon="github"></i></button></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ==========================================================================
         END: REWRITTEN BUTTON COMPONENT SECTION
         ========================================================================== -->

<!-- ==========================================================================
     BADGES SECTION
     ========================================================================== -->
    
    <!-- Badges Component Section -->
    <div id="badges" class="component-section">
        <div class="component-header">
            <h2 class="section-title-primary"><i data-icon="tag"></i> Badges</h2>
            <p class="section-description">Small, inline labels for categorization and status indication. Perfect for highlighting code elements, states, or categories.</p>
        </div>
        <div class="component-body">
            <div class="variants-grid" style="grid-template-columns: 1fr;">
                
                <!-- Sizes Container -->
                <div class="example-wrapper">
                    <div class="example-label">Sizes</div>
                    <div class="example-container">
                        <div class="badge-showcase">
                            <!-- Group 1: Plain Badges -->
                            <div class="badge-group">
                                <span class="badge brand small">SMALL</span>
                                <span class="badge brand">MEDIUM</span>
                                <span class="badge brand large">LARGE</span>
                            </div>
                            <!-- Group 2: Badges with Icons -->
                            <div class="badge-group">
                                <span class="badge brand small"><i data-icon="zap"></i> WITH ICON</span>
                                <span class="badge brand"><i data-icon="zap"></i> WITH ICON</span>
                                <span class="badge brand large"><i data-icon="zap"></i> WITH ICON</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Color Variants Container -->
                <div class="example-wrapper">
                    <div class="example-label">Color Variants</div>
                    <div class="example-container">
                        <div class="badge-showcase">
                            <span class="badge brand">BRAND</span>
                            <span class="badge brand-inverted">INVERTED</span>
                            <span class="badge neutral">NEUTRAL</span>
                            <span class="badge cyan"><i data-icon="palette"></i> CYAN</span>
                            <span class="badge purple"><i data-icon="type"></i> PURPLE</span>
                            <span class="badge orange"><i data-icon="hash"></i> ORANGE</span>
                            <span class="badge pink"><i data-icon="toggle-right"></i> PINK</span>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </div>

        <!-- Modals Component Section -->
    <div id="modals" class="component-section">
        <div class="component-header">
            <h2 class="section-title-primary"><i data-icon="app-window"></i> Modals</h2>
            <p class="section-description">Used for focused tasks or information, such as the "About" screen in the plugin. Features a blurred backdrop effect.</p>
        </div>
        <div class="component-body">
            <div class="variants-grid" style="grid-template-columns: 1fr;">
                <div class="example-wrapper">
                    <div class="example-label">About Modal - Live Example</div>
                    <div class="example-container example-container-modal">
                        <!-- The modal partial is included here -->
                        <!-- @include src/components/_about-modal.html -->
                    </div>
                    <button class="btn btn-secondary btn-md" id="show-modal-btn" onclick="showAboutModal()">
                        <i data-icon="play"></i>
                        <span>Play Demo</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

        </div> <!-- END: guide-container -->

    <!-- Developer Profile v2 -->
    <section class="content-section">
        <div class="section-divider" style="padding: 0 var(--size-3);"></div>
        <div class="guide-container" style="padding: 0 var(--size-3);">
            <!-- src/components/_profile-card.html -->
<div class="profile-card">
    <span class="badge brand absolute">Figma Plugin ASCII ART</span>
    
    <!-- Left side: ASCII Art -->
    <div class="ascii-container">
        <!-- Desktop Version -->
        <div class="ascii-art">
████████╗ ██████╗ ██╗  ██╗███████╗███╗   ██╗     ███████╗██╗  ██╗██████╗  
╚══██╔══╝██╔═══██╗██║ ██╔╝██╔════╝████╗  ██║     ██╔════╝╚██╗██╔╝██╔══██╗
   ██║   ██║   ██║█████╔╝ █████╗  ██╔██╗ ██║     █████╗   ╚███╔╝ ██████╔╝
   ██║   ██║   ██║██╔═██╗ ██╔══╝  ██║╚██╗██║     ██╔══╝   ██╔██╗ ██╔═══╝ 
   ██║   ╚██████╔╝██║  ██╗███████╗██║ ╚████║     ███████╗██╔╝ ██╗██║       ██╗
   ╚═╝    ╚═════╝ ╚═╝  ╚═╝╚══════╝╚═╝  ╚═══╝     ╚══════╝╚═╝  ╚═╝╚═╝       ╚═╝

==============================================================================

[STATUS: ONLINE] : [PROJECT: TOKEN EXPORTER] : [ARCHITECT: NATE MILLS]

==============================================================================

███╗   ██╗ █████╗ ████████╗███████╗     ███╗   ███╗██╗██╗     ██╗     ███████╗
████╗  ██║██╔══██╗╚══██╔══╝██╔════╝     ████╗ ████║██║██║     ██║     ██╔════╝
██╔██╗ ██║███████║   ██║   █████╗       ██╔████╔██║██║██║     ██║     ███████╗
██║╚██╗██║██╔══██║   ██║   ██╔══╝       ██║╚██╔╝██║██║██║     ██║     ╚════██║
██║ ╚████║██║  ██║   ██║   ███████╗     ██║ ╚═╝ ██║██║███████╗███████╗███████║
╚═╝  ╚═══╝╚═╝  ╚═╝   ╚═╝   ╚══════╝     ╚═╝     ╚═╝╚═╝╚══════╝╚══════╝╚══════╝

┌─[ PURPOSE & MISSION ]──────────────────────────────────────────────────────┐
│                                                                            │
│ Building bridges between design and development through Token Exporter—    │
│ a plugin that transforms Figma variables into production-ready code for    │
│ 6 platforms: CSS, Swift, Android, Flutter, JSON, and Tailwind.             │
│                                                                            │
│ 20+ years crafting scalable design systems that empower teams to ship      │
│ consistent, accessible experiences faster.                                 │
│                                                                            │
│ One click. Six platforms. Zero inconsistencies.                            │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
        </div>
        <!-- Mobile Version (Compact) -->
        <div class="ascii-art-mobile">
             
████████╗ ██████╗ ██╗  ██╗███████╗███╗   ██╗     ███████╗██╗  ██╗██████╗  
╚══██╔══╝██╔═══██╗██║ ██╔╝██╔════╝████╗  ██║     ██╔════╝╚██╗██╔╝██╔══██╗
   ██║   ██║   ██║█████╔╝ █████╗  ██╔██╗ ██║     █████╗   ╚███╔╝ ██████╔╝
   ██║   ██║   ██║██╔═██╗ ██╔══╝  ██║╚██╗██║     ██╔══╝   ██╔██╗ ██╔═══╝ 
   ██║   ╚██████╔╝██║  ██╗███████╗██║ ╚████║     ███████╗██╔╝ ██╗██║       ██╗
   ╚═╝    ╚═════╝ ╚═╝  ╚═╝╚══════╝╚═╝  ╚═══╝     ╚══════╝╚═╝  ╚═╝╚═╝       ╚═╝
==============================================================================
[STATUS: ONLINE] : [PROJECT: TOKEN EXPORTER] : [ARCHITECT: NATE MILLS]
==============================================================================
        </div>
    </div>
    
    <!-- Right side: Code Terminal -->
    <div class="code-section">
        <div class="code-container">
            <div class="terminal-header">
                <div class="terminal-title auto-glitch" data-text="creator_profile.exe">creator_profile.exe</div>
                <div class="terminal-status">
                    <div class="status-dot"></div>
                    <span style="color: var(--color-text-muted); font-size: 12px;">CONNECTED</span>
                </div>
            </div>
            <div class="code-block" id="codeBlock">
                <div class="code-line" data-text='<span class="prompt"></span><span class="comment">// Initializing creator profile...</span>'></div>
                <div class="code-line" data-text='<span class="comment">// Loading design system architect...</span>'></div>
                <div class="code-line" data-text=''></div>
                <div class="code-line" data-text='<span class="keyword">const</span> <span class="variable">creator</span> = {'></div>
                <div class="code-line" data-text='    <span class="variable">name</span>: <span class="string">"Nate Mills"</span>,'></div>
                <div class="code-line" data-text='    <span class="variable">role</span>: <span class="string">"Design Systems Architect"</span>,'></div>
                <div class="code-line" data-text='    <span class="variable">mission</span>: <span class="string">"Bridging design and development"</span>,'></div>
                <div class="code-line" data-text='    <span class="variable">philosophy</span>: <span class="string">"Design is code. Code is design."</span>,'></div>
                <div class="code-line" data-text='    '></div>
                <div class="code-line" data-text='    <span class="variable">projects</span>: {'></div>
                <div class="code-line" data-text='        <span class="variable">tokenExporter</span>: <span class="string">"Multi-platform design token generator"</span>,'></div>
                <div class="code-line" data-text='        <span class="variable">designSystem</span>: <span class="string">"Scalable component architecture"</span>'></div>
                <div class="code-line" data-text='    },'></div>
                <div class="code-line" data-text='    '></div>
                <div class="code-line" data-text='    <span class="variable">platforms</span>: [<span class="string">"CSS"</span>, <span class="string">"Swift"</span>, <span class="string">"Android"</span>, <span class="string">"Flutter"</span>, <span class="string">"JSON"</span>, <span class="string">"Tailwind"</span>]'></div>
                <div class="code-line" data-text='};'></div>
                <div class="code-line" data-text=''></div>
                <div class="code-line" data-text='<span class="comment">// Ready to transform your design tokens</span>'></div>
                <div class="code-line" data-text='<span class="variable">creator</span>.<span class="function">initializePlugin</span>();'></div>
            </div>
            <div class="control-panel">
                <button class="btn btn-secondary btn-sm btn-inline glitch-button" data-text="[RE-RUN DEMO]" onclick="startTyping()">[RE-RUN]</button>
            </div>
        </div>
    </div>
</div>
        </div> <!-- END: guide-container -->
    </section> <!-- END: content-section -->

    <!-- Guide Footer Section -->
    <!-- @include src/components/_footer-minimal.html -->


    <a href="YOUR_GITHUB_REPO_URL" target="_blank" rel="noopener noreferrer" class="version-badge" title="View on GitHub">
        v<span id="version"></span>
    </a>

    <script>
        // --- PERFORMANCE-OPTIMIZED VORTEX ANIMATION WITH METRICS ---
        let vortexInitialized = false;
        let vortexObserver = null;
        
        // Performance monitoring system
        const PerformanceMonitor = {
            metrics: {
                frameCount: 0,
                lastFrameTime: 0,
                fps: 0,
                averageFps: 0,
                frameHistory: [],
                animationStartTime: 0,
                totalAnimationTime: 0,
                memoryUsage: 0,
                intersectionEvents: 0,
                animationStateChanges: 0
            },
            
            startMonitoring() {
                this.metrics.animationStartTime = performance.now();
                this.frameLoop();
                
                // Memory monitoring every 2 seconds
                this.memoryInterval = setInterval(() => {
                    if (performance.memory) {
                        this.metrics.memoryUsage = Math.round(performance.memory.usedJSHeapSize / 1024 / 1024 * 100) / 100;
                    }
                }, 2000);
            },
            
            frameLoop() {
                const now = performance.now();
                this.metrics.frameCount++;
                
                if (this.metrics.lastFrameTime) {
                    const delta = now - this.metrics.lastFrameTime;
                    this.metrics.fps = Math.round(1000 / delta);
                    
                    // Keep rolling average of last 60 frames
                    this.metrics.frameHistory.push(this.metrics.fps);
                    if (this.metrics.frameHistory.length > 60) {
                        this.metrics.frameHistory.shift();
                    }
                    
                    this.metrics.averageFps = Math.round(
                        this.metrics.frameHistory.reduce((a, b) => a + b, 0) / this.metrics.frameHistory.length
                    );
                }
                
                this.metrics.lastFrameTime = now;
                this.metrics.totalAnimationTime = now - this.metrics.animationStartTime;
                
                // Continue monitoring while animation is active
                const grid = document.querySelector('.te-icon-grid');
                if (grid && grid.style.animationPlayState !== 'paused') {
                    requestAnimationFrame(() => this.frameLoop());
                }
            },
            
            logEvent(eventType, details = {}) {
                if (eventType === 'intersection') {
                    this.metrics.intersectionEvents++;
                } else if (eventType === 'state-change') {
                    this.metrics.animationStateChanges++;
                }
                
                console.log(`🎯 Vortex ${eventType}:`, {
                    ...details,
                    timestamp: performance.now(),
                    currentFps: this.metrics.fps,
                    averageFps: this.metrics.averageFps,
                    memoryMB: this.metrics.memoryUsage,
                    totalEvents: this.metrics.intersectionEvents + this.metrics.animationStateChanges
                });
            },
            
            getMetricsSummary() {
                return {
                    performance: {
                        currentFPS: this.metrics.fps,
                        averageFPS: this.metrics.averageFps,
                        totalFrames: this.metrics.frameCount,
                        animationUptime: Math.round(this.metrics.totalAnimationTime / 1000 * 100) / 100
                    },
                    resources: {
                        memoryUsageMB: this.metrics.memoryUsage,
                        intersectionEvents: this.metrics.intersectionEvents,
                        stateChanges: this.metrics.animationStateChanges
                    },
                    health: {
                        fpsStable: this.metrics.averageFps >= 55,
                        memoryHealthy: this.metrics.memoryUsage < 100,
                        eventCount: this.metrics.intersectionEvents + this.metrics.animationStateChanges
                    }
                };
            },
            
            stopMonitoring() {
                if (this.memoryInterval) {
                    clearInterval(this.memoryInterval);
                }
                
                const summary = this.getMetricsSummary();
                console.log('🏁 Vortex Performance Summary:', summary);
                
                // Warn if performance issues detected
                if (!summary.health.fpsStable) {
                    console.warn('⚠️ Low FPS detected - consider reducing animation complexity');
                }
                if (!summary.health.memoryHealthy) {
                    console.warn('⚠️ High memory usage detected - monitor for memory leaks');
                }
                
                return summary;
            }
        };
        
        function generateVortexIcons() {
            const startTime = performance.now();
            const grid = document.querySelector('.te-icon-grid');
            if (!grid || vortexInitialized) return;
            
            grid.innerHTML = '';
            const tokenTypes = [
                { icon: 'palette', color: '--value-color' },
                { icon: 'type', color: '--value-text' },
                { icon: 'hash', color: '--value-number' },
                { icon: 'toggle-right', color: '--value-state' }
            ];
            
            for (let i = 0; i < 40; i++) {
                const cell = document.createElement('div');
                cell.classList.add('te-icon-cell');
                const category = tokenTypes[i % tokenTypes.length];
                const icon = document.createElement('i');
                icon.setAttribute('data-icon', category.icon);
                cell.appendChild(icon);
                cell.style.setProperty('--color', `var(${category.color})`);
                
                const angle = Math.random() * Math.PI * 2;
                const radius = 120 + Math.random() * 40;
                cell.style.setProperty('--x-start', `${Math.cos(angle) * radius}px`);
                cell.style.setProperty('--y-start', `${Math.sin(angle) * radius}px`);
                cell.style.setProperty('--x-end', `${Math.cos(angle + Math.PI) * radius}px`);
                cell.style.setProperty('--y-end', `${Math.sin(angle + Math.PI) * radius}px`);
                cell.style.setProperty('--delay', `${Math.random() * 1.5}s`);
                cell.style.setProperty('--scale', 0.6 + Math.random() * 0.5);
                cell.style.setProperty('--blur', Math.random() > 0.3 ? '0px' : '2px');
                
                grid.appendChild(cell);
            }
            
            vortexInitialized = true;
            const initTime = performance.now() - startTime;
            
            PerformanceMonitor.logEvent('vortex-initialized', {
                iconCount: 40,
                initializationTime: Math.round(initTime * 100) / 100,
                gridElement: !!grid
            });
            
            // Start performance monitoring when animation begins
            PerformanceMonitor.startMonitoring();
        }

        /**
         * Initialize Intersection Observer for performance-optimized vortex animation
         * Only runs animation when the About modal is visible in viewport
         */
        function initializeVortexObserver() {
            // Skip if reduced motion is preferred
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                return;
            }

            const aboutModal = document.getElementById('about-modal');
            if (!aboutModal) return;

            // Create observer for About modal visibility
            vortexObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Modal is visible, initialize vortex if needed
                        generateVortexIcons();
                        const grid = document.querySelector('.te-icon-grid');
                        if (grid) {
                            grid.style.animationPlayState = 'running';
                        }
                        
                        PerformanceMonitor.logEvent('intersection', {
                            visible: true,
                            intersectionRatio: entry.intersectionRatio,
                            boundingRect: {
                                width: Math.round(entry.boundingClientRect.width),
                                height: Math.round(entry.boundingClientRect.height)
                            }
                        });
                    } else {
                        // Modal not visible, pause animation to save CPU
                        const grid = document.querySelector('.te-icon-grid');
                        if (grid) {
                            grid.style.animationPlayState = 'paused';
                        }
                        
                        PerformanceMonitor.logEvent('intersection', {
                            visible: false,
                            performanceSummary: PerformanceMonitor.getMetricsSummary()
                        });
                    }
                });
            }, {
                rootMargin: '50px', // Start animation 50px before modal enters viewport
                threshold: 0.1 // Trigger when 10% of modal is visible
            });

            // Start observing the modal
            vortexObserver.observe(aboutModal);

            // Also observe modal state changes
            const modalStateObserver = new MutationObserver((mutations) => {
                mutations.forEach(mutation => {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                        const modal = mutation.target;
                        const grid = document.querySelector('.te-icon-grid');
                        const isShowing = modal.classList.contains('show');
                        
                        if (isShowing && grid) {
                            // Modal is shown, resume animation
                            grid.style.animationPlayState = 'running';
                            generateVortexIcons(); // Ensure icons exist
                            
                            PerformanceMonitor.logEvent('state-change', {
                                modalState: 'shown',
                                animationState: 'running',
                                vortexInitialized: vortexInitialized
                            });
                        } else if (grid) {
                            // Modal is hidden, pause animation and get performance summary
                            grid.style.animationPlayState = 'paused';
                            const summary = PerformanceMonitor.stopMonitoring();
                            
                            PerformanceMonitor.logEvent('state-change', {
                                modalState: 'hidden',
                                animationState: 'paused',
                                sessionSummary: summary
                            });
                        }
                    }
                });
            });

            modalStateObserver.observe(aboutModal, { attributes: true });
        }

        // --- THEME TOGGLE ---
        function initializeThemeToggle() {
            const toggles = Array.from(document.querySelectorAll('[data-theme-toggle]'));
            const root = document.documentElement;
            
            if (toggles.length === 0) return;
            
            // Set initial theme from localStorage or default to dark
            const savedTheme = localStorage.getItem('theme') || 'dark';
            root.setAttribute('data-theme', savedTheme);
            
            // Update toggle state based on current theme for all toggles
            toggles.forEach(toggleEl => {
                if (savedTheme === 'dark') {
                    toggleEl.classList.add('active');
                }
            });
            
            // Handle toggle click with animations for both desktop and mobile
            toggles.forEach(toggleEl => {
                toggleEl.addEventListener('click', () => {
                    const currentTheme = root.getAttribute('data-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    
                    // Update theme
                    root.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    
                    // Update all toggles
                    toggles.forEach(t => {
                        const sunContainer = t.querySelector('.sun-container');
                        const moonContainer = t.querySelector('.moon-container');
                        
                        // Trigger animations
                        if (newTheme === 'light') {
                            t.classList.remove('active');
                            // Animate sun
                            sunContainer.classList.remove('animate-once');
                            void sunContainer.offsetWidth; // Force reflow
                            sunContainer.classList.add('animate-once');
                            setTimeout(() => sunContainer.classList.remove('animate-once'), 800);
                        } else {
                            t.classList.add('active');
                            // Animate moon
                            moonContainer.classList.remove('animate-once');
                            void moonContainer.offsetWidth; // Force reflow
                            moonContainer.classList.add('animate-once');
                            setTimeout(() => moonContainer.classList.remove('animate-once'), 600);
                        }
                    });
                });
            });
            
            // Prevent animations on page load
            toggles.forEach(t => {
                setTimeout(() => {
                    t.style.transition = 'all 0.3s ease';
                }, 100);
            });
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize all functionalities once the DOM is ready
            initializeNavigation();
            initializeMobileMenu();
            initializeScrollHeader();
            initializeGuideLoader();
            animateCounters();
            initFAQAccordion();
            initTechHover();
            initializeTypingObserver();
            initGuideModal();
            initializeThemeToggle();
            
            // Initialize performance-optimized vortex animation
            initializeVortexObserver();

            if (window.lucide) {
                renderAllIcons(); // Use centralized icon rendering
                // Continue with vortex animation initialization
            }
        });

        // --- RENDER ICONS ---
        let lucideInitialized = false;
        let iconRenderDebounceTimer = null;
        
        function renderAllIcons() {
            // Debounce rapid calls to prevent icon flickering
            if (iconRenderDebounceTimer) {
                clearTimeout(iconRenderDebounceTimer);
            }
            
            iconRenderDebounceTimer = setTimeout(() => {
                // Render Lucide Icons only once to prevent re-initialization
                if (window.lucide && !lucideInitialized) {
                    try {
                        // Configure Lucide with consistent settings
                        lucide.createIcons({
                            attrs: {
                                'width': null,
                                'height': null,
                                'class': 'icon-initialized'
                                // Let CSS control stroke-width
                            },
                            nameAttr: 'data-icon' // Ensure we're using data-icon attribute
                        });
                        lucideInitialized = true;
                        
                        // Mark all icons as initialized to trigger opacity transition
                        setTimeout(() => {
                            document.querySelectorAll('[data-icon]').forEach(icon => {
                                icon.classList.add('icon-initialized');
                            });
                        }, 50);
                    } catch (error) {
                        console.error("Lucide icon rendering failed:", error);
                    }
                } else if (window.lucide && lucideInitialized) {
                    // For subsequent calls, only process new icons that aren't already initialized
                    try {
                        const uninitializedIcons = document.querySelectorAll('[data-icon]:not(.icon-initialized)');
                        if (uninitializedIcons.length > 0) {
                            lucide.createIcons({
                                attrs: {
                                    'width': null,
                                    'height': null,
                                    'class': 'icon-initialized'
                                    // Let CSS control stroke-width
                                },
                                nameAttr: 'data-icon',
                                nodes: uninitializedIcons // Only process new icons
                            });
                        }
                    } catch (error) {
                        console.error("Lucide icon update failed:", error);
                    }
                }
                
                // Render Plugin Icons
                if (window.renderPluginIcons) {
                    try {
                        window.renderPluginIcons();
                    } catch (error) {
                        console.error("Plugin icon rendering failed:", error);
                    }
                }
            }, 10); // Small debounce to batch multiple calls
        }

        // --- NAVIGATION & OTHER UI FUNCTIONS (Unchanged from your file) ---
        function initializeMobileMenu() {
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle-right');
            const menuCloseBtn = document.getElementById('menu-close-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuOverlay = document.getElementById('menu-overlay');
            const sidebar = document.getElementById('sidebar');
            const mobileNavLinksContainer = document.getElementById('mobile-nav-links');
            if (!mobileMenuToggle || !mobileMenu) return;
            const populateMobileMenu = () => {
                if (!sidebar || !mobileNavLinksContainer) return;
                const sidebarLinks = sidebar.querySelectorAll('.nav-links li');
                mobileNavLinksContainer.innerHTML = '';
                sidebarLinks.forEach(link => {
                    mobileNavLinksContainer.appendChild(link.cloneNode(true));
                });
                renderAllIcons();
            };
            const openMenu = () => {
                if (mobileMenu) mobileMenu.classList.add('open');
                if (menuOverlay) menuOverlay.classList.add('open');
            };
            const closeMenu = () => {
                if (mobileMenu) mobileMenu.classList.remove('open');
                if (menuOverlay) menuOverlay.classList.remove('open');
            };
            mobileMenuToggle.addEventListener('click', openMenu);
            if (menuCloseBtn) menuCloseBtn.addEventListener('click', closeMenu);
            if (menuOverlay) menuOverlay.addEventListener('click', closeMenu);
            if (mobileNavLinksContainer) {
                mobileNavLinksContainer.addEventListener('click', (e) => {
                    if (e.target.closest('a')) closeMenu();
                });
            }
            populateMobileMenu();
        }
        function initializeScrollHeader() {
            const header = document.getElementById('mobile-header');
            if (!header) return;
            let lastScrollY = window.scrollY;
            const headerHeight = parseFloat(getComputedStyle(header).height);
            window.addEventListener('scroll', () => {
                const mobileMenu = document.getElementById('mobile-menu');
                if (mobileMenu && mobileMenu.classList.contains('open')) return;
                if (lastScrollY < window.scrollY && window.scrollY > headerHeight) {
                    header.classList.add('hidden');
                } else {
                    header.classList.remove('hidden');
                }
                lastScrollY = window.scrollY;
            }, { passive: true });
        }
        function initializeNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.content-section, .token-category, .component-section');
            const observer = new IntersectionObserver(entries => {
                let visibleSections = entries.filter(entry => entry.isIntersecting).map(entry => entry.target);
                if (visibleSections.length > 0) {
                    visibleSections.sort((a, b) => a.getBoundingClientRect().top - b.getBoundingClientRect().top);
                    const activeId = visibleSections[0].getAttribute('id');
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        const linkHref = link.getAttribute('href');
                        if (linkHref === `#${activeId}`) {
                            link.classList.add('active');
                        } else if (linkHref === '#colors' && activeId.includes('colors')) {
                             link.classList.add('active');
                        }
                    });
                }
            }, { rootMargin: "-40% 0px -60% 0px" });
            sections.forEach(section => observer.observe(section));
            document.body.addEventListener('click', (e) => {
                const link = e.target.closest('a.nav-link');
                if (link) {
                    e.preventDefault();
                    const targetId = link.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth' });
                    }
                }
            });
        }
        // copyToken function removed - copy buttons no longer needed
        
        function animateCounters() {
            // Handle both old .counter and new .stat-value elements
            const counters = document.querySelectorAll('.counter, .stat-value');
            
            counters.forEach(counter => {
                const target = parseInt(counter.getAttribute('data-target'));
                const isStatValue = counter.classList.contains('stat-value');
                
                // Enhanced animation with slower speed for small numbers (stat-value elements)
                const speed = isStatValue && target <= 10 ? 100 : 200;
                let current = 0;
                
                const updateCounter = () => {
                    const increment = target / speed;
                    if (current < target) {
                        current += increment;
                        counter.textContent = Math.ceil(current);
                        setTimeout(updateCounter, 10);
                    } else {
                        counter.textContent = target;
                    }
                };
                
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            updateCounter();
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.5 });
                
                observer.observe(counter);
            });
        }
        
        function initFAQAccordion() {
            const faqItems = document.querySelectorAll('.faq-item');
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                question.addEventListener('click', () => {
                    const wasOpen = item.classList.contains('open');
                    faqItems.forEach(i => i.classList.remove('open'));
                    if (!wasOpen) {
                        item.classList.add('open');
                    }
                });
            });
        }
        
        function initializeGuideLoader() {
            const pluginLoader = document.querySelector('.plugin-loader');
            if (pluginLoader) {
                setTimeout(() => {
                    pluginLoader.style.display = 'none';
                }, 2000);
            }
        }
        
        function demoGuideExport() {
            console.log('Export demo triggered');
        }
        
        function demoGuideExport() {
            const loader = document.getElementById('guideProgressLoader');
            if (!loader || loader.classList.contains('is-animating')) return;

            loader.classList.add('is-animating');

            // --- Helper Functions (scoped to the demo) ---
            const updateGuideProgress = (percent) => {
                const percentEl = document.getElementById('guideProgressPercent');
                const fillEl = document.getElementById('guideProgressFill');
                const labelEl = document.getElementById('guideStatusLabel');
                
                const progressStages = [
                    { p: 25, label: "Analyzing" }, { p: 50, label: "Packaging" },
                    { p: 75, label: "Sanitizing" }, { p: 95, label: "Finalizing" }
                ];

                if (percentEl) percentEl.textContent = percent + '%';
                if (fillEl) fillEl.style.width = percent + '%';
                
                const currentStage = progressStages.find(s => percent <= s.p) || progressStages[progressStages.length - 1];
                if (labelEl) labelEl.textContent = currentStage.label;
            };

            const showGuideSuccess = () => {
                loader.classList.add('te-celebrating');
                const iconGrid = document.getElementById('guideIconGrid');
                if(iconGrid) iconGrid.classList.add('fade-out');
                
                const celebrationContainer = document.getElementById('guideCelebration');
                if (celebrationContainer) {
                    celebrationContainer.innerHTML = '<div class="te-success-icon"><i data-icon="circle-check-big"></i></div>';
                    renderAllIcons();
                }
            };
            
            const resetGuideDemo = () => {
                const originalHTML = `
                    <div class="te-icon-grid" id="guideIconGrid"></div>
                    <div class="te-celebration" id="guideCelebration"></div>
                    <div class="te-glass-status" id="guideGlassStatus">
                        <p class="te-progress-percent" id="guideProgressPercent">0%</p>
                        <div class="te-progress-track">
                            <div class="te-progress-fill" id="guideProgressFill"></div>
                        </div>
                        <p class="te-status-label" id="guideStatusLabel">Ready to export</p>
                    </div>`;
                loader.innerHTML = originalHTML;
                loader.classList.remove('is-animating', 'te-celebrating');
                initializeGuideIcons(); // Re-initialize icons on reset
                renderAllIcons();
            };

            // This is the helper function that was missing
            const initializeGuideIcons = () => {
                const grid = document.getElementById('guideIconGrid');
                if (!grid) return;
                grid.innerHTML = ''; 
                
                const tokenTypes = [
                    { icon: 'palette', color: '--value-color' }, { icon: 'type', color: '--value-text' },
                    { icon: 'hash', color: '--value-number' }, { icon: 'toggle-right', color: '--value-state' }
                ];
                
                for (let i = 0; i < 80; i++) {
                    const cell = document.createElement('div');
                    cell.classList.add('te-icon-cell');
                    
                    const category = tokenTypes[i % tokenTypes.length];
                    const icon = document.createElement('i');
                    icon.setAttribute('data-icon', category.icon);
                    cell.appendChild(icon);
                    cell.style.setProperty('--color', `var(${category.color})`);
                    
                    const angle = Math.random() * Math.PI * 2;
                    const radius = 150 + Math.random() * 50;
                    
                    cell.style.setProperty('--x-start', `${Math.cos(angle) * radius}px`);
                    cell.style.setProperty('--y-start', `${Math.sin(angle) * radius}px`);
                    cell.style.setProperty('--x-end', `${Math.cos(angle + Math.PI) * radius}px`);
                    cell.style.setProperty('--y-end', `${Math.sin(angle + Math.PI) * radius}px`);
                    cell.style.setProperty('--delay', `${Math.random() * 1.5}s`);
                    cell.style.setProperty('--scale', 0.6 + Math.random() * 0.5);
                    cell.style.setProperty('--blur', (Math.random() > 0.3) ? '0px' : `${Math.random() * 2}px`);
                    
                    grid.appendChild(cell);
                }
                renderAllIcons();
            };

            // --- Staggered Animation Timeline ---
            resetGuideDemo();
            updateGuideProgress(0);

            setTimeout(() => { updateGuideProgress(25); }, 1500);
            setTimeout(() => { updateGuideProgress(50); }, 2700);
            setTimeout(() => { updateGuideProgress(75); }, 4000);
            setTimeout(() => { updateGuideProgress(100); }, 4500);
            setTimeout(() => { showGuideSuccess(); }, 4800);
            setTimeout(resetGuideDemo, 7300);
        }

    function startTyping() {
        const codeBlock = document.getElementById('codeBlock');
        if (!codeBlock) return;

        // Clear any previous animation to allow re-running safely
        if (window.typingTimeout) {
            clearTimeout(window.typingTimeout);
        }

        const lines = Array.from(codeBlock.querySelectorAll('.code-line'));
        const cursorHTML = '<span class="cursor"></span>';
        let lineIndex = 0;
        let charIndex = 0;

        // Helper function to extract plain text from HTML for typing animation
        function extractPlainText(htmlString) {
            if (!htmlString) return '';
            // Create a temporary div to parse HTML and extract text
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = htmlString;
            return tempDiv.textContent || tempDiv.innerText || '';
        }

        // Helper function to create partial HTML that preserves syntax highlighting during typing
        function createPartialHTML(htmlString, targetLength) {
            if (!htmlString) return '';
            
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = htmlString;
            const plainText = tempDiv.textContent || tempDiv.innerText || '';
            
            if (targetLength >= plainText.length) {
                return htmlString; // Return full HTML if we've reached the end
            }
            
            // Create a partial version that preserves HTML structure
            let charCount = 0;
            let result = '';
            let inTag = false;
            let currentTag = '';
            
            for (let i = 0; i < htmlString.length; i++) {
                const char = htmlString[i];
                
                if (char === '<') {
                    inTag = true;
                    currentTag = char;
                } else if (char === '>' && inTag) {
                    inTag = false;
                    currentTag += char;
                    result += currentTag;
                    currentTag = '';
                } else if (inTag) {
                    currentTag += char;
                } else {
                    if (charCount < targetLength) {
                        result += char;
                        charCount++;
                    } else {
                        break;
                    }
                }
            }
            
            // Close any open tags to maintain valid HTML
            const openTags = [];
            const tagRegex = /<(\/?)([\w-]+)[^>]*>/g;
            let match;
            while ((match = tagRegex.exec(result)) !== null) {
                if (!match[1]) { // Opening tag
                    openTags.push(match[2]);
                } else { // Closing tag
                    const tagIndex = openTags.lastIndexOf(match[2]);
                    if (tagIndex !== -1) {
                        openTags.splice(tagIndex, 1);
                    }
                }
            }
            
            // Close remaining open tags in reverse order
            for (let i = openTags.length - 1; i >= 0; i--) {
                result += `</${openTags[i]}>`;
            }
            
            return result;
        }

        // Reset the terminal
        lines.forEach(line => {
            line.innerHTML = '';
        });

        function type() {
            if (lineIndex >= lines.length) {
                const lastLine = lines[lines.length - 1];
                if (lastLine) {
                    const finalHTML = lastLine.getAttribute('data-text') || '';
                    lastLine.innerHTML = finalHTML + cursorHTML;
                }
                return;
            }

            const currentLine = lines[lineIndex];
            const fullHTML = currentLine.getAttribute('data-text') || '';
            const plainText = extractPlainText(fullHTML);

            if (charIndex >= plainText.length) {
                // Line is complete - set final HTML content with syntax highlighting
                currentLine.innerHTML = fullHTML;
                lineIndex++;
                charIndex = 0;
                window.typingTimeout = setTimeout(type, 50);
                return;
            }

            charIndex++;
            
            // Show partial HTML with syntax highlighting during typing animation
            const partialHTML = createPartialHTML(fullHTML, charIndex);
            currentLine.innerHTML = partialHTML + cursorHTML;

            // Fast typing speed for 5-second completion
            const delay = 15;
            window.typingTimeout = setTimeout(type, delay);
        }

        type();
    }

        function initializeTypingObserver() {
            const profileCard = document.querySelector('.profile-card');
            if (!profileCard) return;

            const observer = new IntersectionObserver((entries, obs) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        startTyping();
                        obs.unobserve(entry.target); // Ensures the animation only triggers once on scroll
                    }
                });
            }, { threshold: 0.5 }); // Trigger when 50% of the card is visible

            observer.observe(profileCard);
        }
        
        function initTechHover() {
            const container = document.querySelector('.tech-stack-grid');
            const techItems = Array.from(document.querySelectorAll('.tech-item[data-tech]'));
            const infoPanel = document.getElementById('info-panel');
            if (!container || !techItems.length || !infoPanel) return;

            let carouselInterval = null;
            let currentIndex = 0;
            const descriptions = {
                claude: "Primary coding partner. Architected the system and wrote complex functions for alias resolution and name sanitization.",
                github: "Version control and collaboration. Every commit tracked, providing easy rollback when experiments failed.",
                openprops: "500+ design tokens ready to use. Why reinvent spacing scales when they've been perfected?",
                lucide: "Beautiful & consistent icon toolkit. Every icon in this guide is from Lucide - lightweight, customizable, and perfectly aligned with modern UI standards.",
                aistudio: "Google's AI platform powered the code generation. Complex refactoring that would take hours was done in minutes with AI assistance.",
                vscode: "Where the magic happens. AI extensions make it feel like pair programming, but faster.",
                figma: "The source of truth. The plugin uses the Figma API to export tokens exactly as designers intended.",
                manus: "A specialized AI model that provided smart refactoring suggestions and caught inefficiencies I missed."
            };

            const showInfo = (techItem) => {
                if (!techItem) return;
                const tech = techItem.dataset.tech;
                const url = techItem.dataset.url || '#';
                
                // Get clean name by extracting just the text nodes, avoiding SVG titles
                const nameMap = {
                    claude: "Claude Code",
                    github: "GitHub", 
                    openprops: "Open Props",
                    lucide: "Lucide Icons",
                    aistudio: "AI Studio",
                    vscode: "VS Code",
                    figma: "Figma",
                    manus: "Manus AI"
                };
                const name = nameMap[tech] || techItem.textContent.trim();
                const description = descriptions[tech] || "Description not available.";
                const icon = techItem.querySelector('svg, [data-icon] svg');

                infoPanel.innerHTML = `
                    <div class="title">
                        ${icon ? icon.outerHTML : ''}
                        <span>${name}</span>
                    </div>
                    <p class="description">${description}</p>
                    <a href="${url}" class="website-link" target="_blank" rel="noopener noreferrer">
                        <span>Visit Website</span>
                        <i data-icon="arrow-up-right" style="width: 1em; height: 1em;"></i>
                    </a>
                `;
                // Re-render icons for dynamic content
                renderAllIcons();
                techItems.forEach(item => {
                    item.classList.toggle('active', item.dataset.tech === tech);
                });
            };

            const startCarousel = () => {
                if (carouselInterval) return;
                carouselInterval = setInterval(() => {
                    currentIndex = (currentIndex + 1) % techItems.length;
                    showInfo(techItems[currentIndex]);
                }, 5000);
            };

            const stopCarousel = () => {
                clearInterval(carouselInterval);
                carouselInterval = null;
            };

            showInfo(techItems[0]);
            startCarousel();
            container.addEventListener('mouseenter', stopCarousel);
            container.addEventListener('mouseleave', startCarousel);
            techItems.forEach((item, index) => {
                item.addEventListener('mouseenter', () => {
                    currentIndex = index;
                    showInfo(item);
                });
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    showInfo(item);
                });
            });
        }
    
        function showAboutModal() {
            const modal = document.getElementById('about-modal');
            const showBtn = document.getElementById('show-modal-btn');
            if (modal) {
                modal.classList.add('show');
                if (showBtn && modal.classList.contains('is-example')) {
                    showBtn.style.display = 'none';
                }
            }
        }
        
        function closeAboutModal() {
            const modal = document.getElementById('about-modal');
            const showBtn = document.getElementById('show-modal-btn');
            if (modal) {
                modal.classList.remove('show');
                if (showBtn && modal.classList.contains('is-example')) {
                    showBtn.style.display = '';
                }
            }
        }
        
        // Make functions global for onclick handlers
        window.showAboutModal = showAboutModal;
        window.closeAboutModal = closeAboutModal;
        
        function initGuideModal() {
            const modal = document.getElementById('about-modal');
            if (!modal) return;
            
            // Add is-example class for demo container
            modal.classList.add('is-example');
            
            // Close on backdrop click
            const backdrop = modal.querySelector('.about-modal-backdrop');
            if (backdrop) {
                backdrop.addEventListener('click', closeAboutModal);
            }
            
            // Close on close button click
            const closeBtn = modal.querySelector('.about-modal-close');
            if (closeBtn) {
                closeBtn.addEventListener('click', closeAboutModal);
            }
            
            // Close on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeAboutModal();
                }
            });
            
            // Show modal by default in example
            modal.classList.add('show');
            
            // Hide the button initially since modal is shown
            const showBtn = document.getElementById('show-modal-btn');
            if (showBtn) {
                showBtn.style.display = 'none';
            }
        }

        // Hero Animation - Floating Token Icons
        function initHeroAnimation() {
            const container = document.getElementById('hero-animation-canvas');
            if (!container) return;

            const iconCount = 30; // Reduced from 60 for better performance
            const tokenTypes = [
                { icon: 'palette', color: 'var(--value-color)' },
                { icon: 'type', color: 'var(--value-text)' },
                { icon: 'hash', color: 'var(--value-number)' },
                { icon: 'toggle-right', color: 'var(--value-state)' },
                { icon: 'layers', color: 'var(--brand-primary)' }
            ];
            const sizeTokens = ['--icon-xs', '--icon-sm', '--icon-md', '--icon-lg', '--icon-xl'];
            const animationClasses = ['rise', 'bubble', 'parallax'];

            // Animation duration constants from CSS (matching design tokens)
            const durations = {
                rise: { min: 25, range: 15 },
                bubble: { min: 20, range: 15 },
                parallax: { min: 20, range: 10 },
                parallaxSlow: { min: 35, range: 10 }
            };

            for(let i = 0; i < iconCount; i++) {
                const iconWrapper = document.createElement('div');
                
                // Randomize selections instead of sequential
                const category = tokenTypes[Math.floor(Math.random() * tokenTypes.length)];
                const sizeVar = sizeTokens[Math.floor(Math.random() * sizeTokens.length)];
                const animationClass = animationClasses[Math.floor(Math.random() * animationClasses.length)];

                iconWrapper.className = 'icon-float ' + animationClass;
                iconWrapper.style.color = category.color;
                iconWrapper.style.fontSize = 'var(' + sizeVar + ')';
                iconWrapper.style.left = Math.random() * 100 + '%';

                // Set durations and effects based on type
                // Match maxDelay to longest animation duration for continuous streaming
                const maxDelay = 45;
                
                if (animationClass === 'rise') {
                    const duration = durations.rise.min + Math.random() * durations.rise.range;
                    iconWrapper.style.animationDuration = duration + 's';
                    iconWrapper.style.animationDelay = Math.random() * maxDelay + 's';
                } else if (animationClass === 'bubble') {
                    const duration = durations.bubble.min + Math.random() * durations.bubble.range;
                    iconWrapper.style.animationDuration = duration + 's';
                    iconWrapper.style.animationDelay = Math.random() * maxDelay + 's';
                } else if (animationClass === 'parallax') {
                    let duration;
                    // Apply blur to smaller icons for depth effect
                    if (sizeVar === '--icon-xs' || sizeVar === '--icon-sm') {
                        duration = durations.parallaxSlow.min + Math.random() * durations.parallaxSlow.range;
                        // Use CSS calc for blur values
                        const blurAmount = 1 + Math.random() * 1; // 1-2px range
                        iconWrapper.style.filter = 'blur(' + blurAmount + 'px)';
                        iconWrapper.style.opacity = 'var(--animation-opacity-dim)';
                    } else {
                        duration = durations.parallax.min + Math.random() * durations.parallax.range;
                    }
                    iconWrapper.style.animationDuration = duration + 's';
                    iconWrapper.style.animationDelay = Math.random() * maxDelay + 's';
                }

                const icon = document.createElement('i');
                icon.setAttribute('data-icon', category.icon);
                iconWrapper.appendChild(icon);
                container.appendChild(iconWrapper);
            }
            
            // Refresh Lucide icons for the new elements
            renderAllIcons();
        }

        // Initialize hero animation on load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initHeroAnimation);
        } else {
            initHeroAnimation();
        }

    </script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOMContentLoaded fired for Color System');
    
    
    // --- V4 ENGINE CONFIGURATION ---
    const colorSectionConfig = {
        containerId: 'colors-section-container',
        title: 'Color System',
        description: 'Comprehensive color palette with brand colors, neutrals, categories, and alpha values. Desktop uses expanded layout, mobile uses compact reference.',
        sections: {
            'core': {
                title: 'Core Colors',
                sections: {
                    'brand': {
                        title: 'Brand',
                        tokens: [
                            { token: '--brand-primary' },
                            { token: '--brand-secondary' }
                        ],
                        gridClass: 'color-grid-2col'  // Use 2-column grid for brand colors
                    },
                    'categories': {
                        title: 'Categories',
                        tokens: [
                            { token: '--value-color' },
                            { token: '--value-text' },
                            { token: '--value-number' },
                            { token: '--value-state' }
                        ]
                    }
                }
            },
            'neutrals': {
                title: 'Neutrals', // Simplified title
                tokens: [] // Will be populated dynamically based on theme
            },
            'alpha': {
                title: 'Alpha',
                sections: {
                    'brand': {
                        title: 'Brand',
                        tokens: [
                            { token: '--brand-primary-alpha-10', alpha: true },
                            { token: '--brand-primary-alpha-20', alpha: true },
                            { token: '--brand-secondary-alpha-10', alpha: true },
                            { token: '--brand-secondary-alpha-20', alpha: true },
                            { token: '--value-color-alpha-10', alpha: true },
                            { token: '--value-text-alpha-10', alpha: true },
                            { token: '--value-number-alpha-10', alpha: true },
                            { token: '--value-state-alpha-10', alpha: true },
                            { token: '--value-color-alpha-20', alpha: true },
                            { token: '--value-text-alpha-20', alpha: true },
                            { token: '--value-number-alpha-20', alpha: true },
                            { token: '--value-state-alpha-20', alpha: true }
                        ]
                    },
                    'black': {
                        title: 'Black',
                        tokens: [
                            { token: '--black-alpha-05', alpha: true },
                            { token: '--black-alpha-10', alpha: true },
                            { token: '--black-alpha-20', alpha: true },
                            { token: '--black-alpha-30', alpha: true },
                            { token: '--black-alpha-50', alpha: true }
                        ]
                    },
                    'white': {
                        title: 'White',
                        tokens: [
                            { token: '--white-alpha-05', alpha: true },
                            { token: '--white-alpha-10', alpha: true },
                            { token: '--white-alpha-20', alpha: true },
                            { token: '--white-alpha-30', alpha: true },
                            { token: '--white-alpha-50', alpha: true }
                        ]
                    }
                }
            },
            'utilities': {
                title: 'Utilities',
                hasSubgroups: true,
                subgroups: {
                    'text': {
                        title: 'Text Colors',
                        tokens: [
                            { token: '--color-text-default', label: 'Default Text', isTextToken: true },
                            { token: '--color-text-secondary', label: 'Secondary Text', isTextToken: true },
                            { token: '--color-text-muted', label: 'Muted Text', isTextToken: true },
                            { token: '--color-text-on-brand', label: 'Text on Brand', isTextToken: true, showOnBrand: true },
                            { token: '--color-text-error', label: 'Error Text', isTextToken: true },
                            { token: '--color-text-heading', label: 'Heading Text', isTextToken: true },
                            { token: '--color-text-label', label: 'Label Text', isTextToken: true },
                            { token: '--color-text-navigation', label: 'Navigation Text', isTextToken: true },
                            { token: '--color-text-interactive', label: 'Interactive Text', isTextToken: true }
                        ]
                    },
                    'surface': {
                        title: 'Surfaces',
                        tokens: [
                            { token: '--surface-1', label: 'Surface 1' },
                            { token: '--surface-2', label: 'Surface 2' },
                            { token: '--surface-3', label: 'Surface 3' },
                            { token: '--surface-4', label: 'Surface 4' },
                            { token: '--surface-hover', label: 'Surface Hover', alpha: true },
                            { token: '--surface-active', label: 'Surface Active', alpha: true }
                        ]
                    },
                    'background': {
                        title: 'Backgrounds',
                        tokens: [
                            { token: '--color-background-primary', label: 'Background Primary' },
                            { token: '--color-background-secondary', label: 'Background Secondary' },
                            { token: '--color-background-tertiary', label: 'Background Tertiary' }
                        ]
                    }
                }
            },
            'gradients': {
                title: 'Gradients',
                sections: {
                    'hero': {
                        title: 'Hero Gradients',
                        tokens: [
                            { token: '--brand-gradient-primary', gradient: true, label: 'Primary Brand' },
                            { token: '--brand-gradient-secondary', gradient: true, label: 'Secondary Brand' },
                            { token: '--brand-gradient-accent', gradient: true, label: 'Accent Brand' },
                            { token: '--brand-gradient-highlight', gradient: true, label: 'Highlight Brand' }
                        ]
                    },
                    'primary-directional': {
                        title: 'Primary Gradient - Directional Variants',
                        tokens: [
                            { token: '--gradient-primary-0', gradient: true, label: 'Bottom to Top' },
                            { token: '--gradient-primary-45', gradient: true, label: 'Diagonal BR-TL' },
                            { token: '--gradient-primary-90', gradient: true, label: 'Left to Right' },
                            { token: '--gradient-primary-135', gradient: true, label: 'Diagonal BL-TR' },
                            { token: '--gradient-primary-180', gradient: true, label: 'Top to Bottom' },
                            { token: '--gradient-primary-225', gradient: true, label: 'Diagonal TL-BR' },
                            { token: '--gradient-primary-270', gradient: true, label: 'Right to Left' },
                            { token: '--gradient-primary-315', gradient: true, label: 'Diagonal TR-BL' }
                        ]
                    },
                    'secondary-directional': {
                        title: 'Secondary Gradient - Directional Variants',
                        tokens: [
                            { token: '--gradient-secondary-0', gradient: true, label: 'Bottom to Top' },
                            { token: '--gradient-secondary-45', gradient: true, label: 'Diagonal BR-TL' },
                            { token: '--gradient-secondary-90', gradient: true, label: 'Left to Right' },
                            { token: '--gradient-secondary-135', gradient: true, label: 'Diagonal BL-TR' },
                            { token: '--gradient-secondary-180', gradient: true, label: 'Top to Bottom' },
                            { token: '--gradient-secondary-225', gradient: true, label: 'Diagonal TL-BR' },
                            { token: '--gradient-secondary-270', gradient: true, label: 'Right to Left' },
                            { token: '--gradient-secondary-315', gradient: true, label: 'Diagonal TR-BL' }
                        ]
                    },
                    'accent-directional': {
                        title: 'Accent Gradient - Directional Variants',
                        tokens: [
                            { token: '--gradient-accent-0', gradient: true, label: 'Bottom to Top' },
                            { token: '--gradient-accent-45', gradient: true, label: 'Diagonal BR-TL' },
                            { token: '--gradient-accent-90', gradient: true, label: 'Left to Right' },
                            { token: '--gradient-accent-135', gradient: true, label: 'Diagonal BL-TR' },
                            { token: '--gradient-accent-180', gradient: true, label: 'Top to Bottom' },
                            { token: '--gradient-accent-225', gradient: true, label: 'Diagonal TL-BR' },
                            { token: '--gradient-accent-270', gradient: true, label: 'Right to Left' },
                            { token: '--gradient-accent-315', gradient: true, label: 'Diagonal TR-BL' }
                        ]
                    },
                    'highlight-directional': {
                        title: 'Highlight Gradient - Directional Variants',
                        tokens: [
                            { token: '--gradient-highlight-0', gradient: true, label: 'Bottom to Top' },
                            { token: '--gradient-highlight-45', gradient: true, label: 'Diagonal BR-TL' },
                            { token: '--gradient-highlight-90', gradient: true, label: 'Left to Right' },
                            { token: '--gradient-highlight-135', gradient: true, label: 'Diagonal BL-TR' },
                            { token: '--gradient-highlight-180', gradient: true, label: 'Top to Bottom' },
                            { token: '--gradient-highlight-225', gradient: true, label: 'Diagonal TL-BR' },
                            { token: '--gradient-highlight-270', gradient: true, label: 'Right to Left' },
                            { token: '--gradient-highlight-315', gradient: true, label: 'Diagonal TR-BL' }
                        ]
                    }
                }
            },
            'tokens': {
                title: 'Tokens',
                isOverviewSection: true, // Special flag for overview section
                customContent: true
            }
        }
    };

    // --- UTILITY FUNCTIONS ---
    const getCssValue = function(token) {
        return getComputedStyle(document.documentElement).getPropertyValue(token).trim();
    };
    
    // Normalize hex colors to 6-character uppercase format
    const normalizeHexColor = function(hex) {
        if (!hex || !hex.startsWith('#')) return hex;
        
        // Remove # and get hex part
        let color = hex.substring(1);
        
        // Convert 3-char to 6-char
        if (color.length === 3) {
            color = color.split('').map(function(c) { return c + c; }).join('');
        }
        
        // Return uppercase
        return '#' + color.toUpperCase();
    };

    // Initialize tab navigation
    const initializeTabNavigation = () => {
        document.querySelectorAll('.tab-clean').forEach(tab => {
            tab.addEventListener('click', () => {
                const targetTab = tab.getAttribute('data-tab');
                
                // Update tabs
                document.querySelectorAll('.tab-clean').forEach(t => {
                    t.classList.remove('active');
                    t.setAttribute('aria-selected', 'false');
                });
                tab.classList.add('active');
                tab.setAttribute('aria-selected', 'true');
                
                // Show/hide content
                if (window.innerWidth <= 768) {
                    // Mobile filtering
                    document.querySelectorAll('.ref-section').forEach(section => {
                        const parent = section.getAttribute('data-parent');
                        const category = section.getAttribute('data-category');
                        
                        // Show sections based on parent attribute matching target tab
                        if (targetTab === 'core') {
                            section.style.display = (parent === 'core') ? 'block' : 'none';
                        } else if (targetTab === 'neutrals') {
                            section.style.display = (parent === 'neutrals') ? 'block' : 'none';
                        } else if (targetTab === 'alpha') {
                            section.style.display = (parent === 'alpha') ? 'block' : 'none';
                        } else if (targetTab === 'utilities') {
                            section.style.display = (parent === 'utilities') ? 'block' : 'none';
                        } else if (targetTab === 'gradients') {
                            section.style.display = (parent === 'gradients') ? 'block' : 'none';
                        } else if (targetTab === 'tokens') {
                            section.style.display = (parent === 'tokens') ? 'block' : 'none';
                        } else {
                            // Default hide all
                            section.style.display = 'none';
                        }
                    });
                } else {
                    // Desktop panel switching
                    document.querySelectorAll('.tab-panel').forEach(panel => {
                        panel.classList.remove('active');
                    });
                    const targetPanel = document.querySelector('[data-panel="' + targetTab + '"]');
                    if (targetPanel) targetPanel.classList.add('active');
                }
            });
        });
    };

    // --- V4 RENDERING ENGINE ---
    const createV4ColorSection = function(config) {
        console.log('createV4ColorSection called with config:', config);
        const container = document.getElementById(config.containerId);
        if (!container) {
            console.error('Container not found:', config.containerId);
            return;
        }
        console.log('Container found:', container);

        // Populate neutrals dynamically based on theme
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
        const neutralPrefix = currentTheme === 'light' ? 'cool' : 'warm';
        config.sections.neutrals.tokens = [];
        for (let i = 0; i <= 9; i++) {
            config.sections.neutrals.tokens.push({ token: '--gray-' + neutralPrefix + '-' + i });
        }

        // Build the v4 structure (without header since it's now in HTML)
        container.innerHTML = '<div class="color-system-container">' +
                    '<!-- Tab Navigation -->' +
                    '<div class="tab-nav-final" role="tablist">' +
                        '<button class="tab-clean active" role="tab" aria-selected="true" data-tab="core">Core</button>' +
                        '<button class="tab-clean" role="tab" data-tab="neutrals">Neutrals</button>' +
                        '<button class="tab-clean" role="tab" data-tab="alpha">Alphas</button>' +
                        '<button class="tab-clean" role="tab" data-tab="utilities">Utilities</button>' +
                        '<button class="tab-clean" role="tab" data-tab="gradients">Gradients</button>' +
                        '<button class="tab-clean" role="tab" data-tab="tokens">Tokens</button>' +
                    '</div>' +
                    
                    '<!-- Desktop Layout -->' +
                    '<div class="desktop-layout">' +
                        renderDesktopPanels(config) +
                    '</div>' +
                    
                    '<!-- Mobile Layout -->' +
                    '<div class="mobile-layout">' +
                        '<div class="mobile-reference">' +
                            renderMobileSections(config) +
                        '</div>' +
                    '</div>' +
                '</div>';

        // Initialize icons through centralized function
        renderAllIcons();

        // Add tab functionality
        initializeTabNavigation();
        
        // Initialize mobile view - show only core sections by default
        if (window.innerWidth <= 768) {
            setTimeout(() => {
                document.querySelectorAll('.ref-section').forEach(section => {
                    const parent = section.getAttribute('data-parent');
                    section.style.display = (parent === 'core') ? 'block' : 'none';
                });
            }, 0);
        }
        
        // Watch for theme changes to update neutrals
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'attributes' && mutation.attributeName === 'data-theme') {
                    // Save current active tab before rebuilding
                    const activeTab = container.querySelector('.tab-clean.active');
                    const activeTabName = activeTab ? activeTab.getAttribute('data-tab') : 'overview';
                    
                    // Re-create the color section with updated neutrals
                    createV4ColorSection(config);
                    
                    // Restore active tab after rebuild
                    const newActiveTab = container.querySelector('[data-tab="' + activeTabName + '"]');
                    if (newActiveTab) {
                        newActiveTab.click();
                    }
                }
            });
        });
        observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] });
    };

    // Helper function to render alpha card
    const renderAlphaCard = (item) => {
        let value = getCssValue(item.token) || '';
        
        // Ensure hex codes are uppercase and 6 characters
        if (value.match(/^#[0-9a-fA-F]{3,6}$/)) {
            value = normalizeHexColor(value);
        }
        
        const swatchClass = 'color-swatch alpha-swatch';
        const backgroundStyle = 'background: ' + value;
        
        const swatchHtml = '<div class="' + swatchClass + ' checkerboard">' +
            '<div class="alpha-color-overlay" style="' + backgroundStyle + '"></div>' +
        '</div>';
        
        // For gradients, only show the token name, not the gradient syntax
        const showValue = !item.gradient;
        
        // Check if this is a gradient with directional variant (same as in renderColorCard)
        const isDirectionalGradient = item.gradient && item.token && item.token.match(/-\d+$/);
        
        // Check if this is a text utility token (same as in renderColorCard)
        const isTextUtility = item.token && (
            item.token.includes('--color-text-') || 
            item.token.includes('--text-color-') ||
            item.token === '--text-color'
        );
        
        // Calculate contrast class for text utilities (same as in renderColorCard)
        const isLowContrast = isTextUtility && value && (
            value.includes('#999') || 
            value.includes('#666') || 
            value.includes('#888') ||
            value.includes('#777') ||
            (value.includes('rgba') && value.includes('0.') && parseFloat(value.match(/0\.(\d+)/)?.[0] || '1') < 0.7)
        );
        
        const contrastClass = isLowContrast ? 
            (value.includes('#666') ? 'split-background' : 'low-contrast') : '';
        
        // For gradients with labels, show both label and token
        let detailsContent;
        if (item.gradient && item.label && !isDirectionalGradient) {
            // Make gradient cards match core card structure: token on top, label below
            detailsContent = '<code>' + item.token + '</code>' +
                           '<span class="hex">' + item.label + '</span>';
        } else {
            // Check if this is an alpha token and simplify the display
            let displayValue = value || 'N/A';
            if (item.token && item.token.includes('alpha') && value && (value.includes('rgba') || value.includes('rgb'))) {
                // Extract opacity from rgba() or rgb() value (both can have 4 parameters)
                const match = value.match(/rgba?\([^,]+,[^,]+,[^,]+,\s*([0-9.]+)\)/);
                if (match) {
                    const opacity = parseFloat(match[1]);
                    displayValue = Math.round(opacity * 100) + '% opacity';
                }
            }
            
            detailsContent = '<code>' + item.token + '</code>' +
                           (showValue ? '<span class="hex">' + displayValue + '</span>' : '');
        }
        
        // Add appropriate classes for different card types
        let cardClass = 'color-card';
        if (item.gradient) {
            cardClass += ' gradient-card';
        }
        if (isDirectionalGradient) {
            cardClass += ' gradient-directional-variant';
        }
        if (isTextUtility) {
            cardClass += ' text-utility-card';
            if (contrastClass) {
                cardClass += ' ' + contrastClass;
            }
        }
        
        return '<div class="' + cardClass + '">' +
                swatchHtml +
                '<div class="color-details">' +
                    detailsContent +
                '</div>' +
            '</div>';
    };

    // Helper function to render regular color card (extracted from main logic)
    const renderColorCard = (item) => {
        let value = getCssValue(item.token) || '';
        
        // Ensure hex codes are uppercase and 6 characters
        if (value.match(/^#[0-9a-fA-F]{3,6}$/)) {
            value = normalizeHexColor(value);
        }
        
        // Check if this is a gradient with directional variant
        const isDirectionalGradient = item.gradient && item.token && item.token.match(/-\d+$/);
        const gradientAngle = isDirectionalGradient ? item.token.match(/-(\d+)$/)[1] + '°' : null;
        
        // Check if this is a text utility token
        const isTextUtility = item.token && (
            item.token.includes('--color-text-') || 
            item.token.includes('--text-color-') ||
            item.token === '--text-color'
        );
        
        // Calculate contrast class for text utilities
        const isLowContrast = isTextUtility && value && (
            value.includes('#999') || 
            value.includes('#666') || 
            value.includes('#888') ||
            value.includes('#777') ||
            (value.includes('rgba') && value.includes('0.') && parseFloat(value.match(/0\.(\d+)/)?.[0] || '1') < 0.7)
        );
        
        const contrastClass = isLowContrast ? 
            (value.includes('#666') ? 'split-background' : 'low-contrast') : '';
        
        const swatchClass = item.alpha ? 'color-swatch alpha-swatch' : 
                           (isDirectionalGradient ? 'color-swatch gradient-swatch-square' : 'color-swatch');
        const backgroundStyle = item.gradient ? 
            'background: ' + value : 
            'background-color: ' + value;
        
        let swatchHtml;
        if (item.alpha) {
            swatchHtml = '<div class="' + swatchClass + ' checkerboard">' +
                '<div class="alpha-color-overlay" style="' + backgroundStyle + '"></div>' +
            '</div>';
        } else if (isDirectionalGradient && gradientAngle) {
            // Square gradient swatch with angle badge
            swatchHtml = '<div class="' + swatchClass + '" style="' + backgroundStyle + '">' +
                '<span class="angle-badge">' + gradientAngle + '</span>' +
            '</div>';
        } else if (isTextUtility) {
            // Text utility cards with "Aa" preview and contrast-aware background
            swatchHtml = '<div class="' + swatchClass + '" style="color: ' + value + ';">' +
                'Aa' +
            '</div>';
        } else {
            swatchHtml = '<div class="' + swatchClass + '" style="' + backgroundStyle + '"></div>';
        }
        
        // For gradients, only show the token name, not the gradient syntax
        const showValue = !item.gradient;
        
        // For gradients with labels, show both label and token
        let detailsContent;
        if (item.gradient && item.label && !isDirectionalGradient) {
            // Make gradient cards match core card structure: token on top, label below
            detailsContent = '<code>' + item.token + '</code>' +
                           '<span class="hex">' + item.label + '</span>';
        } else {
            // Check if this is an alpha token and simplify the display
            let displayValue = value || 'N/A';
            if (item.token && item.token.includes('alpha') && value && (value.includes('rgba') || value.includes('rgb'))) {
                // Extract opacity from rgba() or rgb() value (both can have 4 parameters)
                const match = value.match(/rgba?\([^,]+,[^,]+,[^,]+,\s*([0-9.]+)\)/);
                if (match) {
                    const opacity = parseFloat(match[1]);
                    displayValue = Math.round(opacity * 100) + '% opacity';
                }
            }
            
            detailsContent = '<code>' + item.token + '</code>' +
                           (showValue ? '<span class="hex">' + displayValue + '</span>' : '');
        }
        
        // Add appropriate classes for different card types
        let cardClass = 'color-card';
        if (item.gradient) {
            cardClass += ' gradient-card';
        }
        if (isDirectionalGradient) {
            cardClass += ' gradient-directional-variant';
        }
        if (isTextUtility) {
            cardClass += ' text-utility-card';
            if (contrastClass) {
                cardClass += ' ' + contrastClass;
            }
        }
        
        return '<div class="' + cardClass + '">' +
                swatchHtml +
                '<div class="color-details">' +
                    detailsContent +
                '</div>' +
            '</div>';
    };

    // Helper function to render text color cards with single Aa preview (updated from mockup)
    const renderTextColorCard = (item) => {
        let value = getCssValue(item.token) || '';
        
        // Determine background based on contrast needs
        let swatchBackground = 'var(--color-background-primary)';
        let cardClass = 'color-card text-utility-card';
        
        // Low contrast tokens need special backgrounds
        if (item.token.includes('secondary')) {
            // Split background for secondary text
            swatchBackground = 'linear-gradient(to right, var(--color-background-primary) 50%, var(--color-background-tertiary) 50%)';
            cardClass += ' split-background';
        } else if (item.token.includes('muted')) {
            // Tertiary background for muted text  
            swatchBackground = 'var(--color-background-tertiary)';
            cardClass += ' low-contrast';
        } else if (item.showOnBrand) {
            // Brand background for on-brand text
            swatchBackground = 'var(--brand-primary)';
        }
        
        return '<div class="' + cardClass + '" style="background: transparent;">' +
                '<div class="color-swatch" style="background: ' + swatchBackground + '; display: flex; align-items: center; justify-content: center; color: ' + value + '; font-size: 2rem; font-weight: 600; border: 1px solid var(--color-border-default); height: 100px; margin-bottom: var(--size-3); border-radius: var(--radius-2);">' +
                    'Aa' +
                '</div>' +
                '<div class="color-details">' +
                    '<code>' + item.token + '</code>' +
                    '<span class="hex">' + (value || 'N/A') + '</span>' +
                '</div>' +
            '</div>';
    };

    // Render a color section
    const renderColorSection = (key, section, skipTitle = false) => {
        // Special handling for overview section
        if (section.isOverviewSection) {
            // Color System Overview content
            return '<div class="color-overview-section">' +
                '<div class="overview-intro">' +
                    '<h3 class="text-label">Understanding Our Color System</h3>' +
                    '<p class="section-description">Our color system is built on three layers of design tokens, ensuring consistency and flexibility across all platforms.</p>' +
                '</div>' +
                '<div class="color-architecture">' +
                    '<div class="architecture-layer">' +
                        '<h4 class="text-caption">1. Primitive Tokens</h4>' +
                        '<p>Raw color values like <code>--gray-0</code> through <code>--gray-9</code></p>' +
                    '</div>' +
                    '<div class="architecture-layer">' +
                        '<h4 class="text-caption">2. Semantic Tokens</h4>' +
                        '<p>Purpose-based tokens like <code>--color-text-primary</code> and <code>--surface-1</code></p>' +
                    '</div>' +
                    '<div class="architecture-layer">' +
                        '<h4 class="text-caption">3. Component Tokens</h4>' +
                        '<p>Component-specific tokens like <code>--btn-primary-bg</code></p>' +
                    '</div>' +
                '</div>' +
                '<div class="theme-demo">' +
                    '<h4 class="text-caption">Theme-Aware Colors</h4>' +
                    '<p>Our neutrals automatically adapt: cool grays in light mode, warm grays in dark mode. Try toggling the theme to see the shift!</p>' +
                    '<div class="theme-comparison">' +
                        '<div class="theme-sample light-sample">' +
                            '<div class="sample-label">Light Mode</div>' +
                            '<div class="sample-colors">' +
                                '<div class="color-chip" style="background: var(--gray-cool-0)"></div>' +
                                '<div class="color-chip" style="background: var(--gray-cool-3)"></div>' +
                                '<div class="color-chip" style="background: var(--gray-cool-6)"></div>' +
                                '<div class="color-chip" style="background: var(--gray-cool-9)"></div>' +
                            '</div>' +
                        '</div>' +
                        '<div class="theme-sample dark-sample">' +
                            '<div class="sample-label">Dark Mode</div>' +
                            '<div class="sample-colors">' +
                                '<div class="color-chip" style="background: var(--gray-warm-0)"></div>' +
                                '<div class="color-chip" style="background: var(--gray-warm-3)"></div>' +
                                '<div class="color-chip" style="background: var(--gray-warm-6)"></div>' +
                                '<div class="color-chip" style="background: var(--gray-warm-9)"></div>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +
                '</div>' +
            '</div>';
        }
        
        let html = '<section class="color-section">';
        
        // Add subheaders for alpha section
        if (key === 'alpha' && section.sections) {
            // Alpha now has sections structure, handle it differently
            Object.entries(section.sections).forEach(([subkey, subsection]) => {
                if (subsection.tokens && subsection.tokens.length > 0) {
                    html += '<div class="color-subsection">';
                    html += '<h4 class="subsection-title">' + subsection.title + '</h4>';
                    html += '<div class="color-grid-4col">';
                    
                    subsection.tokens.forEach(item => {
                        html += renderAlphaCard(item);
                    });
                    
                    html += '</div>';
                    html += '</div>';
                }
            });
            html += '</section>';
            return html;
        } else if (key === 'alpha' && section.tokens) {
            // Legacy alpha structure (fallback)
            const brandAlphas = section.tokens.filter(t => t.token.includes('brand') || t.token.includes('value'));
            const blackAlphas = section.tokens.filter(t => t.token.includes('black'));
            const whiteAlphas = section.tokens.filter(t => t.token.includes('white'));
            
            // Render Brand Alphas
            if (brandAlphas.length > 0) {
                html += '<h3 class="text-label" style="margin-bottom: var(--size-3);">Brand Alphas</h3>';
                html += '<div class="color-grid-4col" style="margin-bottom: var(--size-6);">';
                brandAlphas.forEach(item => {
                    html += renderAlphaCard(item);
                });
                html += '</div>';
            }
            
            // Render Category Alphas
            if (categoryAlphas.length > 0) {
                html += '<h3 class="text-label" style="margin-bottom: var(--size-3);">Category Alphas</h3>';
                html += '<div class="color-grid-4col" style="margin-bottom: var(--size-6);">';
                categoryAlphas.forEach(item => {
                    html += renderAlphaCard(item);
                });
                html += '</div>';
            }
            
            // Render Black Alphas
            if (blackAlphas.length > 0) {
                html += '<h3 class="text-label" style="margin-bottom: var(--size-3);">Black Alphas</h3>';
                html += '<div class="color-grid-4col" style="margin-bottom: var(--size-6);">';
                blackAlphas.forEach(item => {
                    html += renderAlphaCard(item);
                });
                html += '</div>';
            }
            
            // Render White Alphas
            if (whiteAlphas.length > 0) {
                html += '<h3 class="text-label" style="margin-bottom: var(--size-3);">White Alphas</h3>';
                html += '<div class="color-grid-4col">';
                whiteAlphas.forEach(item => {
                    html += renderAlphaCard(item);
                });
                html += '</div>';
            }
        } else if (key === 'utilities' && section.hasSubgroups) {
            // Handle utilities section with subgroups
            Object.entries(section.subgroups).forEach(([subkey, subgroup]) => {
                html += '<h3 class="text-label" style="margin-bottom: var(--size-3);">' + subgroup.title + '</h3>';
                html += '<div class="color-grid-4col" style="margin-bottom: var(--size-6);">';
                
                subgroup.tokens.forEach(item => {
                    if (item.isTextToken) {
                        // Special rendering for text tokens with split design
                        html += renderTextColorCard(item);
                    } else {
                        // Regular color card
                        html += renderColorCard(item);
                    }
                });
                html += '</div>';
            });
        } else if (key === 'gradients' && section.sections) {
            // Handle gradients section with nested sections
            Object.entries(section.sections).forEach(([subkey, subsection]) => {
                html += '<div class="color-subsection">';
                
                // Hero gradients: no title, 2-column grid (align with Core)
                if (subkey === 'hero') {
                    html += '<div class="color-grid-2col">';
                } else {
                    // Other gradient sections: keep title and 3-column grid
                    html += '<h4 class="subsection-title">' + subsection.title + '</h4>';
                    html += '<div class="color-grid-3col">';
                }
                
                subsection.tokens.forEach(item => {
                    html += renderColorCard(item);
                });
                html += '</div>';
                html += '</div>';
            });
        } else if (section.hasSubgroups && section.subgroups) {
            // Handle utilities with subgroups
            Object.keys(section.subgroups).forEach(subKey => {
                const subgroup = section.subgroups[subKey];
                html += '<div class="color-subsection">';
                html += '<h4 class="subsection-title">' + subgroup.title + '</h4>';
                html += '<div class="color-grid-4col">';
                
                if (subgroup.tokens && subgroup.tokens.length > 0) {
                    subgroup.tokens.forEach(item => {
                        html += renderColorCard(item);
                    });
                }
                
                html += '</div>';
                html += '</div>';
            });
        } else if (section.sections) {
            // Handle nested sections (like brand with semantic/primitives and gradients)
            Object.keys(section.sections).forEach(subKey => {
                const subSection = section.sections[subKey];
                html += '<div class="color-subsection">';
                html += '<h4 class="subsection-title">' + subSection.title + '</h4>';
                
                // Use custom grid class if specified, otherwise default to 4-column
                const gridClass = subSection.gridClass || 'color-grid-4col';
                html += '<div class="' + gridClass + '">';
                
                if (subSection.tokens && subSection.tokens.length > 0) {
                    subSection.tokens.forEach(item => {
                        html += renderColorCard(item);
                    });
                }
                
                html += '</div>';
                html += '</div>';
            });
        } else {
            // Original rendering for other sections
            html += '<div class="color-grid-4col">';
            
            if (section.tokens && section.tokens.length > 0) {
                section.tokens.forEach(item => {
                    html += renderColorCard(item);
                });
            }
            
            html += '</div>';
        }
        
        // Add usage examples if available
        if (section.usage) {
            html += '<div class="usage-section-light">' +
                    '<h4>Usage Examples</h4>' +
                    '<div class="usage-grid-2col">' +
                        section.usage +
                    '</div>' +
                '</div>';
        }
        
        html += '</section>';
        return html;
    };

    // Render desktop panels
    const renderDesktopPanels = (config) => {
        let html = '';
        
        // Individual panels only - no 'all' panel
        Object.keys(config.sections).forEach((key, index) => {
            html += '<div class="tab-panel ' + (key === 'core' ? 'active' : '') + '" data-panel="' + key + '">';
            // Skip title for sections where tab name is sufficient
            const skipTitle = key === 'neutrals' || key === 'alpha' || key === 'utilities';
            html += renderColorSection(key, config.sections[key], skipTitle);
            html += '</div>';
        });
        
        return html;
    };

    // Helper function to render a single mobile token
    const renderMobileToken = (item) => {
        let value = getCssValue(item.token) || '';
        
        // Ensure hex codes are uppercase and 6 characters
        if (value.match(/^#[0-9a-fA-F]{3,6}$/)) {
            value = normalizeHexColor(value);
        }
        
        const swatchClass = item.alpha ? 'ref-swatch alpha-swatch' : 'ref-swatch';
        const backgroundStyle = item.gradient ? 
            'background: ' + value : 
            item.alpha ? 
            'background: ' + value : 
            'background-color: ' + value;
        
        // For alpha swatches, add checkerboard background
        const swatchHtml = item.alpha ? 
            '<div class="' + swatchClass + ' checkerboard">' +
                '<div class="alpha-color-overlay" style="' + backgroundStyle + '"></div>' +
            '</div>' :
            '<div class="' + swatchClass + '" style="' + backgroundStyle + '"></div>';
        
        // For gradients, show label instead of full CSS value
        let displayValue = item.gradient && item.label ? item.label : value;
        
        // Check if this is an alpha token and simplify the display (same logic as desktop)
        if (item.token && item.token.includes('alpha') && value && (value.includes('rgba') || value.includes('rgb'))) {
            // Extract opacity from rgba() or rgb() value (both can have 4 parameters)
            const match = value.match(/rgba?\([^,]+,[^,]+,[^,]+,\s*([0-9.]+)\)/);
            if (match) {
                const opacity = parseFloat(match[1]);
                displayValue = Math.round(opacity * 100) + '% opacity';
            }
        }
        
        return '<div class="ref-item">' +
                swatchHtml +
                '<div class="ref-info">' +
                    '<code>' + item.token.trim() + '</code>' +
                    '<span>' + displayValue + '</span>' +
                '</div>' +
            '</div>';
    };

    // Render mobile sections
    const renderMobileSections = (config) => {
        let html = '';
        Object.entries(config.sections).forEach(([key, section]) => {
            // Handle sections with nested structure (like core and gradients)
            if (section.sections) {
                // For core section, add proper subsection headers
                Object.entries(section.sections).forEach(([subkey, subsection]) => {
                    if (subsection.tokens && subsection.tokens.length > 0) {
                        // Add subsection header with proper data-category
                        let categoryAttr = key + '-' + subkey;
                        let title = subsection.title;
                        
                        html += '<div class="ref-section" data-category="' + categoryAttr + '" data-parent="' + key + '">';
                        
                        // Add subsection header
                        html += '<h4 class="ref-title">' + title + '</h4>';
                        html += '<div class="ref-items">';
                        
                        subsection.tokens.forEach(item => {
                            html += renderMobileToken(item);
                        });
                        
                        html += '</div></div>';
                    }
                });
                return;
            }
            
            // Handle utilities section with subgroups
            if (section.hasSubgroups && section.subgroups) {
                Object.entries(section.subgroups).forEach(([subkey, subgroup]) => {
                    if (subgroup.tokens && subgroup.tokens.length > 0) {
                        html += '<div class="ref-section" data-category="' + key + '-' + subkey + '" data-parent="' + key + '">';
                        html += '<h4 class="ref-title">' + subgroup.title + '</h4>';
                        html += '<div class="ref-items">';
                        
                        subgroup.tokens.forEach(item => {
                            html += renderMobileToken(item);
                        });
                        
                        html += '</div></div>';
                    }
                });
                return;
            }
            
            // Handle special sections
            if (section.isOverviewSection) {
                // Render tokens overview content for mobile
                html += '<div class="ref-section" data-category="' + key + '" data-parent="' + key + '">' +
                    '<div class="color-overview-section mobile-overview">' +
                        '<div class="overview-intro">' +
                            '<h4 class="text-label">Token Architecture</h4>' +
                            '<p class="section-description">Three layers of design tokens:</p>' +
                        '</div>' +
                        '<div class="architecture-layers">' +
                            '<div class="architecture-layer">' +
                                '<strong>1. Primitives</strong>' +
                                '<p>Raw values: <code>--gray-0</code></p>' +
                            '</div>' +
                            '<div class="architecture-layer">' +
                                '<strong>2. Semantic</strong>' +
                                '<p>Purpose: <code>--surface-1</code></p>' +
                            '</div>' +
                            '<div class="architecture-layer">' +
                                '<strong>3. Component</strong>' +
                                '<p>Specific: <code>--btn-primary-bg</code></p>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +
                '</div>';
                return;
            }
            
            // Skip sections without tokens
            if (!section.tokens || section.tokens.length === 0) {
                return;
            }
            
            // Regular sections (neutrals, alpha without subsections)
            html += '<div class="ref-section" data-category="' + key + '" data-parent="' + key + '">';
            
            // Don't add redundant title for single sections
            html += '<div class="ref-items">';
            
            section.tokens.forEach(item => {
                html += renderMobileToken(item);
            });
            
            html += '</div></div>';
        });
        return html;
    };

    // --- INITIALIZE ---
    console.log('About to initialize Color System...');
    try {
        console.log('Color config:', colorSectionConfig);
        createV4ColorSection(colorSectionConfig);
        console.log('Color System initialized successfully');
    } catch (error) {
        console.error('Color section failed:', error);
        console.error('Error stack:', error.stack);
        const container = document.getElementById('colors-section-container');
        if (container) {
            container.innerHTML = '<div style="color: red; padding: 20px; border: 2px solid red;">' +
                'Color system failed to load. Error: ' + error.message + '<br>' +
                'Stack: <pre>' + error.stack + '</pre>' +
                'Check console for details.</div>';
        }
    }
});

// === SCROLL CUE FUNCTIONALITY ===
function smoothScroll() {
    window.scrollTo({
        top: window.innerHeight,
        behavior: 'smooth'
    });
}

// Hide scroll cue on scroll
let scrollCue = document.getElementById('scrollCue');
let hasScrolled = false;

window.addEventListener('scroll', function() {
    if (!hasScrolled && window.scrollY > 100) {
        hasScrolled = true;
        if (scrollCue) {
            scrollCue.classList.add('hidden');
        }
    }
});

// Add keyboard support to scroll cue
if (scrollCue) {
    scrollCue.setAttribute('tabindex', '0');
    scrollCue.setAttribute('role', 'button');
    scrollCue.setAttribute('aria-label', 'Scroll to content');
    
    scrollCue.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            smoothScroll();
        }
    });
}

// === SECTION ANIMATIONS ===
// Intersection Observer for scroll animations
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -100px 0px'
};

const animationObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.style.animationPlayState = 'running';
            entry.target.classList.remove('animate-on-scroll');
        }
    });
}, observerOptions);

// Apply animations to elements when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    // Add animation classes to hero elements
    const heroTitle = document.querySelector('.guide-main-title');
    const heroDescription = document.querySelector('.hero-description');
    const heroTagline = document.querySelector('.hero-tagline');
    const heroCTA = document.querySelector('.figma-cta');
    
    if (heroTitle) {
        heroTitle.classList.add('animate-fade-up', 'animate-on-scroll');
    }
    if (heroTagline) {
        heroTagline.classList.add('animate-fade-up', 'animate-on-scroll', 'delay-1');
    }
    if (heroDescription) {
        heroDescription.classList.add('animate-fade-up', 'animate-on-scroll', 'delay-2');
    }
    if (heroCTA) {
        heroCTA.classList.add('animate-fade-up', 'animate-on-scroll', 'delay-3');
    }
    
    // Add animations to section headers
    document.querySelectorAll('.section-title-primary').forEach((el, i) => {
        el.classList.add('animate-fade-up', 'animate-on-scroll');
        const desc = el.parentElement.querySelector('.section-description');
        if (desc) {
            desc.classList.add('animate-fade-up', 'animate-on-scroll', 'delay-1');
        }
    });
    
    // Add animations to cards
    document.querySelectorAll('.token-card-default, .token-card-advanced').forEach((el, i) => {
        el.classList.add('animate-scale', 'animate-on-scroll', `delay-${(i % 3) + 1}`);
    });
    
    // Add animations to components
    document.querySelectorAll('.example-container').forEach((el, i) => {
        el.classList.add('animate-fade-up', 'animate-on-scroll', `delay-${(i % 3) + 2}`);
    });
    
    // Observe all animated elements
    document.querySelectorAll('.animate-on-scroll').forEach(el => {
        animationObserver.observe(el);
    });
});

// Play Motion Demo Function
function playMotionDemo(demoType) {
    const element = event.target.closest('.motion-demo-card').querySelector('.motion-element');
    
    // Remove any existing animation classes
    element.className = 'motion-element';
    
    // Force reflow to restart animation
    void element.offsetWidth;
    
    // Add the appropriate animation class
    element.classList.add('animate-' + demoType);
    
    // Remove animation class after completion
    const animationDuration = {
        'ease-3': 1000,
        'ease-spring-3': 1000,
        'linear': 1000,
        'duration-100': 100,
        'duration-150': 150,
        'duration-300': 300,
        'hover-lift': 500,
        'scale-in': 300,
        'spinner': 3000
    };
    
    setTimeout(() => {
        element.classList.remove('animate-' + demoType);
    }, animationDuration[demoType] || 1000);
}
</script>

    </body>
    </html>